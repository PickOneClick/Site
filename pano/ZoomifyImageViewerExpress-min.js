/*
 Zoomify Image Viewer Express v2.8, Copyright Zoomify, Inc., 1999-2014. All rights reserved.
You may use this file on private and public websites, for personal and commercial purposes, with
or without modifications, so long as this notice is included. Redistribution via other means is not
permitted without prior permission. Additional terms apply. For complete license terms please see
the Zoomify License Agreement in this product and on the Zoomify website at www.zoomify.com.
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
*/
(function(){(function(){return this}).call().Z={}})();
Z.showImage=function(a,b,c){Z.showImage.done?(Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&(Z.parameters=Z.Utils.parseParameters(c)),Z.initialize()):(Z.showImage.done=!0,Z.Utils.addCrossBrowserMethods(),Z.Utils.addCrossBrowserEvents(),Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.setCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,
null,"callbackFunction",b);-1==c&&(c=Z.callbacks.length);Z.callbacks[c]={callbackEvent:a,callbackFunction:b}},Z.setEditPermissionFunction=function(a){Z.externalEditPermissionFunction=a},Z.clearCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",b);-1!=c&&(Z.callbacks=Z.Utils.arraySplice(Z.callbacks,c,1))},Z.imagePath="undefined"!==typeof b&&null!==b?Z.Utils.stringRemoveTrailingSlashCharacters(b):null,"undefined"!==typeof c&&("string"===
typeof c?(a=unescape(c),a=Z.Utils.stringUnescapeAmpersandCharacters(a),Z.parameters=Z.Utils.parseParameters(a)):Z.parameters=Z.Utils.parseParameters(c)),"complete"!=document.readyState?(Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)):Z.initialize())};
Z.initialize=function(){Z.Utils.removeEventListener(document,"DOMContentLoaded",Z.initialize);Z.Utils.removeEventListener(window,"load",Z.initialize);Z.Utils.detectBrowserFeatures();Z.Utils.setParameters(Z.parameters);Z.Viewer=new Z.ZoomifyImageViewer;Z.Viewer.configureViewer()};
Z.ZoomifyImageViewer=function(){function a(){document.getElementsByTagName("body")?document.getElementsByTagName("body")[0].onorientationchange=b:window.setTimeout(a,100)}function b(a){!Z.interactivityOff&&Z.fullView&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1),Z.Toolbar&&Z.annotations&&1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!1),Z.Viewport&&(Z.Viewport.toggleFullViewMode(!1),Z.Viewport.toggleFullViewMode(!0)),
Z.Toolbar&&Z.annotations&&1<Z.annotationPanelVisible&&Z.Toolbar.setVisibilityAnnotationPanel(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0))}function c(a){if(!Z.interactivityOff&&Z.keys&&"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName&&(a=Z.Utils.event(a),18==a.keyCode||a.altKey||(Z.viewportCurrent.zoomAndPanAllStop(!0,!0),Z.maskingSelection&&Z.viewportCurrent.clearLabelMask()),
a)){var b=a.type;a=a.keyCode;if("keydown"==b)switch(a){case 90:Z.viewportCurrent.zoom("out");break;case 17:Z.viewportCurrent.zoom("out");break;case 65:Z.viewportCurrent.zoom("in");break;case 16:Z.viewportCurrent.zoom("in");break;case 37:Z.viewportCurrent.pan("left");break;case 38:Z.viewportCurrent.pan("up");break;case 40:Z.viewportCurrent.pan("down");break;case 39:Z.viewportCurrent.pan("right");break;case 27:Z.fullView?Z.viewportCurrent.toggleFullViewMode(!1):Z.viewportCurrent.reset();break;case 190:Z.rotationVisible&&
Z.viewportCurrent.rotateClockwise();break;case 188:Z.rotationVisible&&Z.viewportCurrent.rotateCounterwise();break;case 33:h.viewportNext();break;case 34:h.viewportPrior()}else"keyup"==b&&(90==a||17==a||65==a||16==a?Z.viewportCurrent.zoom("stop"):37==a||39==a?Z.viewportCurrent.pan("horizontalStop"):38!=a&&40!=a||Z.viewportCurrent.pan("verticalStop"))}}function d(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c=Z.Utils.isRightMouseButton(a),d=a.altKey;if(!("mouseover"!=b&&"mouseout"!=b&&Z.interactivityOff||
"mousedown"==b&&(Z.interactivityOff||Z.coordinatesVisible&&d)||c)){Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();switch(b){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mouseout":Z.Viewer.initializeViewerKeyDefaultListeners(!1)}var h;h=Z.Utils.event(a);var f=h.type;if(h&&f)switch(a=Z.Utils.target(h),c=Z.Utils.relatedTarget(h),d=Z.Utils.getMousePosition(h),"DOMMouseScroll"==
f&&(f="mousewheel"),f){case "mouseover":h=Z.Utils.nodeIsInViewer(a);f=Z.Utils.nodeIsInViewer(c);h&&f||(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!0),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0),Z.mouseOutDownPoint=null);break;case "mouseout":h=Z.Utils.nodeIsInViewer(a);f=Z.Utils.nodeIsInViewer(c);h&&f||"[object HTMLSelectElement]"==a||"[object HTMLOptionElement]"==a||"[object HTMLSelectElement]"==c||"[object HTMLOptionElement]"==c||(Z.mouseIsDown?Z.mouseOutDownPoint=
new Z.Utils.Point(d.x,d.y):(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "mousewheel":l||(l=window.setTimeout(e,m)),a=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),Z.viewportCurrent.mouseWheelHandler(a)}if("mousedown"==b||"mousemove"==b)return!1}}}function e(a){l&&(window.clearTimeout(l),l=null,Z.zooming="stop",Z.viewportCurrent.updateView())}var h=this;Z.ViewerDisplay=Z.Utils.createContainerElement("div",
"ViewerDisplay","inline-block","relative","hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer");Z.pageContainer=document.getElementById(Z.pageContainerID);var f=Z.Utils.getElementStyle(Z.pageContainer);Z.ViewerDisplay.style["-webkit-touch-callout"]="none";Z.ViewerDisplay.style["-moz-user-select"]="none";Z.ViewerDisplay.style["-khtml-user-select"]="none";Z.ViewerDisplay.style["-webkit-user-select"]="none";Z.ViewerDisplay.style["-ms-user-select"]="none";
Z.ViewerDisplay.style["-o-user-select"]="none";Z.ViewerDisplay.style["user-select"]="none";Z.viewerW=parseFloat(f.width);Z.viewerH=parseFloat(f.height);-1!=f.width.indexOf("%")&&(Z.viewerW=parseFloat(Z.Utils.getElementStyleProperty(Z.pageContainer,"width")));-1!=f.height.indexOf("%")&&(Z.viewerH=parseFloat(Z.Utils.getElementStyleProperty(Z.pageContainer,"height")));isNaN(Z.viewerW)&&(Z.viewerW=Z.ViewerDisplay.clientWidth);isNaN(Z.viewerH)&&(Z.viewerH=Z.ViewerDisplay.clientHeight);if(0==Z.viewerW||
0==Z.viewerH)winDimensions=Z.Utils.getWindowSize(),0==Z.viewerW&&(Z.pageContainer.parentNode.style.width=winDimensions.x+"px",Z.viewerW=Z.pageContainer.clientWidth),0==Z.viewerH&&(Z.pageContainer.parentNode.style.height=winDimensions.y+"px",Z.viewerH=Z.pageContainer.clientHeight);Z.pageContainer.innerHTML="";Z.pageContainer.appendChild(Z.ViewerDisplay);var m=parseInt(Z.Utils.getResource("z165"),10),l;this.configureViewer=function(){function b(){Z.clearCallback("viewportInitialized",b);h.initializeViewerKeyEventListeners(!0);
Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",Z.Utils.preventDefault);a();Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized");h.configureComponents(Z.viewportCurrent)}
Z.setCallback("viewportInitialized",b);Z.Viewport=new Z.ZoomifyViewport;Z.viewportCurrent=Z.Viewport};this.configureComponents=function(a){0<Z.toolbarVisible&&!Z.Toolbar&&(Z.Toolbar=new Z.ZoomifyToolbar(a));0<Z.navigatorVisible&&!Z.Navigator&&(Z.Navigator=new Z.ZoomifyNavigator(a),Z.Navigator&&Z.Navigator.z682())};this.setSizeAndPosition=function(a,b,c,d,e){Z.viewerW=a;Z.viewerH=b;Z.ViewerDisplay.style.width=a+"px";Z.ViewerDisplay.style.height=b+"px";Z.Viewport&&Z.Viewport.getInitialized()&&Z.Viewport.setSizeAndPosition(a,
b,c,d);b=1==Z.toolbarPosition?b-Z.toolbarH:0;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.Toolbar.setSizeAndPosition(a,null,null,b),Z.toolbarAutoShowHide&&Z.Toolbar.show(!0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&(Z.Navigator.setSizeAndPosition(null,null,c,d,Z.navigatorFit),1<Z.navigatorVisible&&Z.Navigator.setVisibility(!0));e&&Z.Viewport.updateView(!0)};this.initializeViewerKeyEventListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",c),Z.Utils.addEventListener(document,
"keyup",c)):(Z.Utils.removeEventListener(document,"keydown",c),Z.Utils.removeEventListener(document,"keyup",c))};this.initializeViewerKeyDefaultListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)):(Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault))}};
Z.ZoomifyViewport=function(a,b,c){function d(a,b,c,p,d,g,e,h,f,t,ka){Z.imageW=a;Z.imageH=b;Z.imageCenterX=Z.imageW/2;Z.imageCenterY=Z.imageH/2;Rb=d;Ia=c;Ja=p;null!==f&&null!==t&&null!==ka&&(Z.sourceMagnification=f,Z.focal=t,Z.quality=ka);if("ZoomifyImageFile"==Z.tileSource)for(a=ta-1;0<=a;a--)la[a]=Math.ceil(ra[a]/Ia),Ba[a]=Math.ceil(Ca[a]/Ja),Da[a]=la[a]*Ba[a];else{a=Z.imageW;for(b=Z.imageH;a>Ia||b>Ja;)a/=2,b/=2,ta++;a=Z.imageW;b=Z.imageH;c=0;for(p=ta-1;0<=p;p--)ra[p]=a,Ca[p]=b,la[p]=Math.ceil(ra[p]/
Ia),Ba[p]=Math.ceil(Ca[p]/Ja),Da[p]=la[p]*Ba[p],a/=2,b/=2,c+=Da[p];if(c!=Rb&&("ZoomifyImageFolder"==Z.tileSource||"ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)){ra=[];Ca=[];la=[];Ba=[];ta=1;a=Z.imageW;b=Z.imageH;for(c=2;a>Ia||b>Ja;)a=Math.floor(Z.imageW/c),b=Math.floor(Z.imageH/c),c*=2,a%2&&a++,b%2&&b++,ta++;a=Z.imageW;b=Z.imageH;c=2;tileCounter=0;for(p=ta-1;0<=p;p--)la[p]=Math.floor(a/Ia),a%Ia&&la[p]++,Ba[p]=Math.floor(b/Ja),b%Ja&&Ba[p]++,Da[p]=la[p]*Ba[p],tileCounter+=Da[p],
ra[p]=a,Ca[p]=b,a=Math.floor(Z.imageW/c),b=Math.floor(Z.imageH/c),c*=2,a%2&&a++,b%2&&b++;a=tileCounter;a!=Rb&&Z.Utils.showMessage(Z.Utils.getResource("z254"))}}n.validateXYZDefaults();ta>kc?(ua=L(Ea,Z.initialZ),F&&oCtx.scale(ua,ua)):F=Pa=oCtx=null;Qa=L(ea,Z.initialZ);Za=P=L(I,Z.initialZ);Z.useCanvas&&ma.scale(P,P);l(Ib);lc=!0;ta>mc&&(l(Jb),nc=!0,ta>oc&&(l(Ab),pc=!0));va.sort();va=Z.Utils.arrayUnique(va);y(va,H,"simple","image-backfill");q(Z.initialX,Z.initialY,Z.initialZ,Z.initialR,null,!0);Z.initialFullPage&&
n.toggleFullViewMode(!0);Z.Utils.addEventListener(T,"mousedown",k);Z.Utils.addEventListener(T,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(T,"touchstart",k);Z.Utils.addEventListener(T,"touchmove",k);Z.Utils.addEventListener(T,"touchend",k);Z.Utils.addEventListener(T,"touchcancel",k);Z.Utils.addEventListener(T,"gesturestart",k);Z.Utils.addEventListener(T,"gesturechange",k);Z.Utils.addEventListener(T,"gestureend",k);Z.Utils.addEventListener(V,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener($,
"contextmenu",Z.Utils.preventDefault);Sb=!0;Z.Utils.validateCallback("viewportInitialized");Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized");n.syncViewportRelated()}function e(){ta=1;ea=I=0;aa=!1;"undefined"!==typeof ra&&Z.Utils.arrayClear(ra);"undefined"!==typeof Ca&&Z.Utils.arrayClear(Ca);"undefined"!==typeof la&&Z.Utils.arrayClear(la);"undefined"!==typeof Ba&&Z.Utils.arrayClear(Ba);
"undefined"!==typeof Da&&Z.Utils.arrayClear(Da);"undefined"!==typeof ob&&Z.Utils.arrayClear(ob);"undefined"!==typeof tierTileOffsetsCount&&Z.Utils.arrayClear(tierTileOffsetsCount);"undefined"!==typeof tierTileOffsetChunks&&Z.Utils.arrayClear(tierTileOffsetChunks);"undefined"!==typeof tierTileOffsetLast&&Z.Utils.arrayClear(tierTileOffsetLast);"undefined"!==typeof db&&Z.Utils.arrayClear(db);"undefined"!==typeof tierTileByteCountsCount&&Z.Utils.arrayClear(tierTileByteCountsCount);"undefined"!==typeof tierTileByteCountChunks&&
Z.Utils.arrayClear(tierTileByteCountChunks);"undefined"!==typeof tierTileByteCountLast&&Z.Utils.arrayClear(tierTileByteCountLast)}function h(a,b,c,p){if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof p||null===p)p=0;Z.viewerW=fa=a;Z.viewerH=ba=b;na=fa*qc;oa=ba*qc;Ra=na/2;Sa=oa/2;ia=-((na-fa)/2)+c;ja=-((oa-ba)/2)+p;F&&(F.width=fa,F.height=ba,Pa.width=fa+"px",Pa.height=ba+"px",Pa.left="0px",Pa.top="0px");T.width=na;T.height=oa;u.width=na+"px";u.height=oa+"px";u.left=ia+"px";u.top=ja+"px";
$.width=na;$.height=oa;pa.width=na+"px";pa.height=oa+"px";Z.useCanvas&&(F&&(oCtx.translate(fa/2,ba/2),oCtx.save()),ma.translate(Ra,Sa),ma.save())}function f(a,b,c){if("ZoomifyImageFile"==Z.tileSource){c=parseFloat(Z.Utils.getResource("z125"));var p=parseFloat(Z.Utils.getResource("z124"));b.loadByteRange(a,c,p,"header")}else"ZoomifyImageFolder"==Z.tileSource&&(a=Z.Utils.cacheProofPath(a+"/ImageProperties.xml"),b.loadXML(a,c))}function m(a,b){e();if("undefined"===typeof n.getInitialized)window.setTimeout(function(){m(a,
b)},100);else{var c=null,p=null,g=null,cb=null,k=null,q=null;"ZoomifyImageFolder"==Z.tileSource&&(c=parseInt(a.documentElement.getAttribute("WIDTH"),10),p=parseInt(a.documentElement.getAttribute("HEIGHT"),10),k=parseInt(a.documentElement.getAttribute("NUMTILES"),10),parseInt(a.documentElement.getAttribute("NUMIMAGES"),10),q=parseInt(a.documentElement.getAttribute("VERSION"),10),g=cb=parseInt(a.documentElement.getAttribute("TILESIZE"),10));null!==Z.tileW&&(g=Z.tileW);null!==Z.tileH&&(cb=Z.tileH);if("ZoomifyImageFolder"==
Z.tileSource||"ImageServer"==Z.tileSource){if(null===g||isNaN(g))g=Ia;if(null===cb||isNaN(cb))cb=Ja;if(null===k||isNaN(k))k=1}!isNaN(c)&&0<c&&!isNaN(p)&&0<p&&!isNaN(g)&&0<g&&!isNaN(cb)&&0<cb&&0<k?d(c,p,g,cb,k,q,null,null,null,null,null,b):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}}function l(a){for(var b=la[a]-1,c=Ba[a]-1,p=0;p<=b;p++)for(var d=0;d<=c;d++)va[va.length]=a+"-"+p+"-"+d}function s(a){if(a){a=n.z542(ea);
Z.Utils.arrayClear(va);b=a.l;for(c=a.r;b<=c;b++)for(p=a.t,d=a.b;p<=d;p++)va[va.length]=ea+"-"+b+"-"+p;n.validateView("tilesToLoad-backfill",null,null,va);y(va,H,"simple","image-backfill")}else{Z.Utils.arrayClear(eb);Z.Utils.arrayClear(pb);Z.Utils.arrayClear($a);Z.Utils.arrayClear(W);a=n.z542();for(var b=a.l,c=a.r;b<=c;b++)for(var p=a.t,d=a.b;p<=d;p++){var g=I+"-"+b+"-"+p;eb[eb.length]=g;W[W.length]=g}if(n.getInitialized()&&0<sa.length&&(I==Ib||I==Jb||I==Ab))for(b=0,c=sa.length;b<c;b++)(p=sa[b])&&
p.t==I&&p.c>=a.l&&p.c<=a.r&&p.r>=a.t&&p.r<=a.b&&($a[$a.length]=p.name,pb[pb.length]=p,d=Z.Utils.arrayIndexOf(W,p.name),-1!=d&&(W=Z.Utils.arraySplice(W,d,1)));b=0;for(c=wa.length;b<c;b++)(p=wa[b])&&p.t==I&&p.c>=a.l&&p.c<=a.r&&p.r>=a.t&&p.r<=a.b&&(d=Z.Utils.arrayIndexOf($a,p.name),-1==d&&($a[$a.length]=p.name,pb[pb.length]=p),p=Z.Utils.arrayIndexOf(W,p.name),-1!=p&&(W=Z.Utils.arraySplice(W,p,1)));if(0!=Kb){b=0;for(c=Ka.length;b<c;b++)p=Ka[b],p.alpha=1;Z.Utils.arrayClear(Ka);Z.Utils.arrayClear(fb)}if(0==
Z.debug||1==Z.debug)n.validateView("tilesToDisplay",null,eb.length),n.validateView("tilesInCache",null,$a.length),n.validateView("tilesToLoad",null,W.length);else if(2==Z.debug||3==Z.debug)n.validateView("tilesToDisplay",null,eb.length,eb),n.validateView("tilesInCache",null,$a.length,$a),n.validateView("tilesToLoad",null,W.length,W)}}function w(a,b,c,p,d,g){d||Z.Utils.clearDisplay(a);if("canvasCopy"==p)Z.Utils.clearDisplay($),ma.restore(),ma.save(),ma.scale(1,1),ma.drawImage(Ta,-Ra,-Sa),ma.restore(),
ma.save(),ma.scale(P,P);else{d=n.z542(b);g=[];if(null===c)for(var e=0,k=pb.length;e<k;e++)g[e]=pb[e];else if(0<c.length)for(e=0,k=c.length;e<k;e++){var q=c[e];q&&q.t==b&&(b==ea&&!aa||q.c>=d.l&&q.c<=d.r&&q.r>=d.t&&q.r<=d.b)&&(g[g.length]=c[e])}if(0<g.length)if(n.validateView("z622-"+a.id,null,null,g),"centerOut"==p)for(e=Math.floor(g.length/2),k=g.length;e<k;e++)M(a,b,g[e]),g.length-e-1!=e&&M(a,b,g[g.length-e-1]);else for(e=0,k=g.length;e<k;e++)M(a,b,g[e]);else n.validateView("No cached tiles in view");
n.validateView("blankLine")}}function x(a,b){var c=n.z542();syncTransitionCanvas();for(var p=0,d=b.length;p<d;p++){var g=b[p];g&&g.t==a&&(a==ea||g.c>=c.l&&g.c<=c.r&&g.r>=c.t&&g.r<=c.b)&&M(Ta,a,g)}}function y(a,b,c,p){var d="undefined"!==typeof p&&null!==p?"-"+p:"";if(0<a.length){n.validateView("z577"+d,null,null,a);d=(new Date).getTime();if("centerOut"==c){c=Math.floor(a.length/2);for(var g=a.length;c<g;c++){var e=a[c];e&&(e=new G(e,p),ga(e,d,b));a.length-c-1!=c&&(e=a[a.length-c-1])&&(e=new G(e,p),
ga(e,d,b))}}else for(c=0,g=a.length;c<g;c++)if(e=a[c])e=new G(e,p),ga(e,d,b);n.validateView("blankLine")}else n.validateView("z577"+d,"No new tiles requested")}function G(a,b){this.name=a;var c=new R(a);this.t=c.t;this.c=c.c;this.r=c.r;this.x=Math.floor(this.c*Ia);this.y=Math.floor(this.r*Ja);this.image=null;this.alpha=0;this.url=n.formatTilePath(this.t,this.c,this.r,b);this.style=this.elmt=this.loadTime=null}function R(a){this.t=parseInt(a.substring(0,a.indexOf("-")),10);this.c=parseInt(a.substring(a.indexOf("-")+
1,a.lastIndexOf("-")),10);this.r=parseInt(a.substring(a.lastIndexOf("-")+1),10)}function ha(a,b,c){c=b+c*la[a];b=8*c+ob[a];c=Math.floor(c/gb);var p=c*gb,p=p+gb>Da[a]?8*(Da[a]-p):rc;this.chunkStart=ob[a]+c*rc;this.chunkEnd=this.chunkStart+p;this.offsetStartInChunk=b-this.chunkStart;this.chunkID=a.toString()+"-"+c.toString()}function Q(a,b,c){c=b+c*la[a];b=4*c+db[a];c=Math.floor(c/gb);var p=c*gb,p=p+gb>Da[a]?4*(Da[a]-p):sc;this.chunkStart=db[a]+c*sc;this.chunkEnd=this.chunkStart+p;this.bcStartInChunk=
b-this.chunkStart;this.chunkID=a.toString()+"-"+c.toString()}function A(a,b){for(var c=0,p=qa.length;c<p;c++){var d=qa[c].split(",");d[0]==a&&d[5]==b&&(void 0!==d[4]&&"image-display"==d[4]?La[La.length]=d[1]+"-"+d[2]+"-"+d[3]:"image-backfill"==d[4]&&(Ua[Ua.length]=d[1]+"-"+d[2]+"-"+d[3]),qa=Z.Utils.arraySplice(qa,c,1),c--,p--)}0<La.length&&(La.sort(),La=Z.Utils.arrayUnique(La),n.validateView("z637",La),X(La,r,"simple","image-display"));0<Ua.length&&(Ua.sort(),Ua=Z.Utils.arrayUnique(Ua),X(Ua,H,"simple",
"image-backfill"))}function X(a,b,c,d){c=(new Date).getTime();for(var g=0,e=a.length;g<e;g++){var k=null;if(k=a[g])if(a=Z.Utils.arraySplice(a,g,1),g--,e--,index=Z.Utils.arrayIndexOfObjectValue(qb,"name",k),-1!=index?(k=qb[index],qb=Z.Utils.arraySplice(qb,index,1),k.url=n.formatTilePath(k.t,k.c,k.r,d)):k=new G(k,d),null!=k&&-1==k.url.indexOf("NaN"))n.validateView("z577Retry",k.name+"  "+k.url),ga(k,c,b);else if(-1==k.url.indexOf("NaN")){var q=parseInt(Z.Utils.getResource("z268MEDIUM"),10);Z.Utils.showMessage(Z.Utils.getResource("z280-ZIF")+
k.name+".jpg",!1,q,"center",!1)}}}function ga(a,b,c){var d=a.name;if("z647"==a.url.substr(0,8)){g(a);b=a.name;c=Z.Utils.arrayIndexOf(W,b);-1!=c&&(W=Z.Utils.arraySplice(W,c,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)c=Z.Utils.arrayIndexOf(La,b),-1!=c&&(La=Z.Utils.arraySplice(La,c,1));Ka[Ka.length]=a;fb[fb.length]=b}else if("offsetLoading"==a.url)-1==Z.Utils.arrayIndexOfObjectValue(qb,"name",d)&&(qb[qb.length]=a),n.validateView("z581DelayForOffset",d);else if("offsetLoading"!=
a.url){var e=c==r?"image-display":"image-backfill",k=a.t==Ib&&lc||a.t==Jb&&nc||a.t==Ab&&pc;"image-display"==e&&k||(a.loadTime=b,n.validateView("z581-"+e,d),Dc.loadImage(a.url,Z.Utils.createCallback(null,c,a),e,a))}}function r(a,b){if(a&&b){a.image=b;var c=a.name,d=Z.Utils.arrayIndexOf(W,c);if(-1!=d){W=Z.Utils.arraySplice(W,d,1);g(a);-1==Z.Utils.arrayIndexOf(fb,c)&&(fb[fb.length]=c,Ka[Ka.length]=a);Lb||(Lb=window.setInterval(ca,50));Kb=W.length;if(0==Kb){Z.useCanvas&&0<D&&(Tb?(x(I,wa),w($,I,wa,"canvasCopy",
!1,"4. Updating view: all new tiles loaded"),window.setTimeout(function(){Z.Utils.clearDisplay(Ta)},200),Tb=!1):w($,I,wa,"centerOut",!1,"4. Updating view: all new tiles loaded"));for(;hb.length>D&&wa.length>D;)hb=Z.Utils.arraySplice(hb,0,1),wa=Z.Utils.arraySplice(wa,0,1);tc=0}n.validateView("onTileLoad",a.name,a.loadTime);n.updateProgress(tc,Kb)}}else"undefined"!==typeof b&&null!==b||console.log(Z.Utils.getResource("z280")+a.name+".jpg")}function H(a,b){if(a&&b){a.image=b;var c=a.name;sa[sa.length]=
a;var d=Z.Utils.arrayIndexOf(va,c);-1!=d&&(va=Z.Utils.arraySplice(va,d,1));if("ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)c=Z.Utils.arrayIndexOf(Ua,c),-1!=c&&(Ua=Z.Utils.arraySplice(Ua,c,1));a.alpha=1;a.t==ea&&M(V,ea,a);n.validateView("z599",a.name);a.t==I&&r(a,b)}else if("undefined"===typeof b||null===b)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+a.name+".jpg"):Z.Utils.showMessage(Z.Utils.getResource("z280")+a.name+".jpg")}function ca(a){for(var b=a=0,c=Ka.length;b<
c;b++){var d=Ka[b];d.t==I?(0!=Ub&&1>d.alpha+Ub?d.alpha+=Ub:(d.alpha=1,a++),M($,I,d),a>=c&&(window.clearInterval(Lb),Lb=null,b=c)):(Ka=Z.Utils.arraySplice(Ka,b,1),fb=Z.Utils.arraySplice(fb,b,1),d=Z.Utils.arrayIndexOf(W,d.name),-1!=d&&(W=Z.Utils.arraySplice(W,d,1)),c--)}}function M(a,b,c){if("z647"!=c.url.substr(0,8)&&0!=c.image.width&&0!=c.image.height){n.validateView("z507",c.name);var d=c.x,g=c.y;b=S(b,1);ua=L(Ea,n.getZoom());var e=8<ua;Z.useCanvas?(a==$||a==Ta||a==V&&aa?(d-=Z.imageX*b,g-=Z.imageY*
b):a==F&&(aa||e)&&(e=n.calculateCurrentCenterCoordinates(),d-=e.x*b,g-=e.y*b),b=a.getContext("2d"),Z.alphaSupported&&1>c.alpha&&"transitionCanvas"!=a.id&&-1==a.id.indexOf("oversizeDisplay")&&(b.globalAlpha=c.alpha),b.drawImage(c.image,d,g),Z.alphaSupported&&1>c.alpha&&"transitionCanvas"!=a.id&&"oversizeDisplay"!=a.id&&(b.globalAlpha=1),2==Z.debug&&z521(a,c.name,d,g,P)):(a==$?(d-=Z.imageX*b-Ra/P,g-=Z.imageY*b-Sa/P,b=P):b=Qa,c.elmt||(c.elmt=Z.Utils.createContainerElement("img"),c.elmt.onmousedown=Z.Utils.preventDefault,
Z.Utils.addEventListener(c.elmt,"contextmenu",Z.Utils.preventDefault),c.elmt.src=c.url,c.style=c.elmt.style,c.style.position="absolute",Z.Utils.renderQuality(c,Z.renderQuality),Z.cssTransformsSupported&&(c.style[Z.cssTransformProperty+"Origin"]="0px 0px")),c.elmt.parentNode!=a&&a.appendChild(c.elmt),a=c.style,a.display="none",Z.cssTransformsSupported?a[Z.cssTransformProperty]=["matrix(",(c.image.width/c.elmt.width*b).toFixed(8),",0,0,",(c.image.height/c.elmt.height*b).toFixed(8),",",(d*b).toFixed(8),
Z.cssTransformNoUnits?",":"px,",(g*b).toFixed(8),Z.cssTransformNoUnits?")":"px)"].join(""):(a.width=c.image.width*b+"px",a.height=c.image.height*b+"px",a.left=d*b+"px",a.top=g*b+"px"),a.display="inline-block",Z.Utils.setOpacity(c,c.alpha))}}function N(a,b){var c=S(b,1),d=Math.floor(a.l*c/Ia),g=Math.floor(a.r*c/Ia),e=Math.floor(a.t*c/Ja),c=Math.floor(a.b*c/Ja);0>d&&(d=0);g>la[b]-1&&(g=la[b]-1);0>e&&(e=0);c>Ba[b]-1&&(c=Ba[b]-1);this.l=d;this.r=g;this.t=e;this.b=c}function C(a,b,c,d,g,e,k){this.l=a+
c/k;this.r=a+d/k;this.t=b+g/k;this.b=b+e/k}function O(a,b){var c=a-Z.Utils.getElementPosition(Z.ViewerDisplay).x,d=b-Z.Utils.getElementPosition(Z.ViewerDisplay).y;return new Z.Utils.Point(c,d)}function da(a,b,c,d){if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;0>d&&(d+=360);var g=parseFloat(u.left)+Ra,e=parseFloat(u.top)+Sa;a-=g;b-=e;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,d),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(Z.imageX+
a/c,Z.imageY+b/c)}function xa(a,b,c,d){if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;0>d&&(d+=360);a=(Z.imageX-a)*c;b=(Z.imageY-b)*c;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,-d),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(ia+a,ja+b)}function S(a,b){return ra[a]/Z.imageW*b}function L(a,b){return b/(ra[a]/Z.imageW)}function B(a,b,c,d,g){if(Z.constrainPan){d=Math.round(d);var e=a,k=b;c="undefined"!==typeof c&&null!==c?
c:Z.imageZ;d="undefined"!==typeof d&&null!==d?d:Z.imageR;0>d&&(d+=360);var q=Z.Utils.getDisplayPositionRotated(u,d),h=Z.imageW,f=Z.imageH,n=fa,t=ba,l=Math.round(h*c),ka=Math.round(f*c);if("container"==g){var m=c,E=d;if("undefined"===typeof m||null===m)m=Z.imageZ;if("undefined"===typeof E||null===E)E=Z.imageR;0>E&&(E+=360);a=(ia-a)/m;b=(ja-b)/m;var Xa,x;switch(E){case 0:Xa=Z.imageX+a;x=Z.imageY+b;break;case 90:Xa=Z.imageX+b;x=Z.imageY-a;break;case 180:Xa=Z.imageX-a;x=Z.imageY-b;break;case 270:Xa=Z.imageX-
b,x=Z.imageY+a}b=new Z.Utils.Point(Xa,x);a=b.x;b=b.y}E=Z.constrainPanStrict?0:n/2/c;x=Z.constrainPanStrict?0:t/2/c;Xa=(n+q.y)/2/c-E;E=h-(n+q.y)/2/c+E;m=(t+q.x)/2/c-x;q=f-(t+q.x)/2/c+x;a=(0==d||180==d)&&l>n||(90==d||270==d)&&l>t||!Z.constrainPanStrict?a<=Xa?Xa:a>=E?E:a:h/2;b=(0==d||180==d)&&ka>t||(90==d||270==d)&&ka>n||!Z.constrainPanStrict?b<=m?m:b>=q?q:b:f/2;if("container"==g){var y;g=c;c=d;if("undefined"===typeof g||null===g)g=Z.imageZ;if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&(c+=360);
var G;switch(c){case 0:y=a-Z.imageX;G=b-Z.imageY;break;case 90:y=Z.imageY-b;G=a-Z.imageX;break;case 180:y=Z.imageX-a;G=Z.imageY-b;break;case 270:y=b-Z.imageY,G=Z.imageX-a}y=new Z.Utils.Point(ia-y*g,ja-G*g);a=y.x;b=y.y}a==e&&b==k||Z.Utils.validateCallback("panConstrained")}return new Z.Utils.Point(a,b)}function J(a){a>Z.maxZ?(a=Z.maxZ,Z.Utils.validateCallback("zoomConstrainedMax")):a<Z.minZ&&(a=Z.minZ,Z.Utils.validateCallback("zoomConstrainedMin"));return a}function g(a){if(0<D){var b=Z.Utils.arrayIndexOf(hb,
a.name);-1!=b&&(hb=Z.Utils.arraySplice(hb,b,1),wa=Z.Utils.arraySplice(wa,b,1));hb[hb.length]=a.name;wa[wa.length]=a}}function E(){window.clearTimeout(wb);wb=null;Bb=((new Date).getTime()-tilesTimeStart)/1E3;var a=Vb*Bb,a=Cb&&xb<a,b=Cb&&xb>=Mb;0<Cb?Nb<Ec?a||b?(Nb+=1,n.updateView(!0)):wb=window.setTimeout(E,uc):console.log(Z.Utils.getResource("ERROR_VALIDATEVIEW")):(Nb=0,Z.Utils.validateCallback("viewUpdateComplete"),Z.Utils.validateCallback("viewUpdateCompleteGetLabelIDs"))}function ka(a){Z.preventDupCall||
(Z.priorX=Z.imageX,Z.priorY=Z.imageY,Z.priorZ=Z.imageZ,Z.priorR=Math.round(Z.imageR));Z.preventDupCall="undefined"!==typeof a&&null!==a}function q(a,b,c,d,g,e){e||n.zoomAndPanAllStop();Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();if("undefined"===typeof a||null===a)a=Z.imageW/2;if("undefined"===typeof b||null===b)b=Z.imageH/2;"undefined"===typeof c||null===c?c=Z.fitZ:1<c&&(c/=100);if("undefined"===typeof d||null===d)d=Z.imageR;c=J(c);d=90*Math.round(Math.abs(d)/90)*Z.Utils.getSign(d);
-360>=d?d+=360:360<=d&&(d-=360);a=B(a,b,c,d,"image");Z.imageX=a.x;Z.imageY=a.y;Z.imageZ=c;d!=Z.imageR&&Z.Utils.rotateElement(u,d);Z.imageR=d;n.updateView(!0);"function"===typeof g&&g()}function Ma(){if(ab&&(0!=ya||0!=za||0!=Fa)){var a=ya,b=za,c=Fa,d=n.getZoom();0!=c&&(d=S(I,P*(1+c)),d=J(d),d!=Z.imageZ&&rb(d));if(0!=a||0!=b)a=parseFloat(u.left)+a,b=parseFloat(u.top)+b,d=B(a,b,d,Z.imageR,"container"),u.left=Math.round(d.x)+"px",u.top=Math.round(d.y)+"px",b=d.x-ia,d=d.y-ja,F&&aa&&(Z.mobileDevice||Math.abs(b)>
fa/2||Math.abs(d)>ba/2)&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display");0==Wb%2&&n.syncViewportRelated();Wb++;ab=window.setTimeout(Ma,Xb)}}function sb(a,b,c,d,g,e,k){Db++;var q=g/e,h=Db*q,f=Z.Utils.easing(Z.imageX,a,h,g),t=Z.Utils.easing(Z.imageY,b,h,g),l=Z.Utils.easing(Z.imageZ,c,h,g),h=Z.Utils.easing(Z.imageR,d,h,g),t=xa(f,t,l),f=t.x,t=t.y,ka=!1,m=syncOversize=!1;if(parseFloat(u.left)!=f||parseFloat(u.top)!=t)u.left=f+"px",u.top=t+"px",m=!0,F&&aa&&(syncOversize=!0);l!=Z.imageZ&&(rb(l,
!1),ka=m=!0,F&&aa&&(oCtx.restore(),oCtx.save(),oCtx.scale(ua,ua),syncOversize=!0));h!=Z.imageR&&(Z.Utils.rotateElement(u,h),F&&aa&&(oCtx.rotate((h-Z.imageR)*Math.PI/180),syncOversize=!0),Z.imageR=h,m=!0);syncOversize&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display");0==Db%2&&n.syncViewportRelated(!1,!1,ka,m,ka);l=Z.tour&&Z.tourStop&&0==Math.round(Z.imageR%90);Db<e+1&&!l?ib=window.setTimeout(function(){sb(a,b,c,d,g,e,k)},q):(Z.interactivityOff=!1,ib&&(window.clearTimeout(ib),ib=null),n.updateView(),
"function"===typeof k&&k())}function tb(){Wb=Fa=za=ya=0;ab&&(window.clearTimeout(ab),ab=null)}function rb(a,b){var c=!1,d=L(I,a);if(d!=P){P=d;var c=d/Za,g=na*c,e=oa*c,k=(na-g)/2,q=(oa-e)/2;d<Za&&(d=B(parseFloat(u.left),parseFloat(u.top),a,Z.imageR,"container"),u.left=d.x+"px",u.top=d.y+"px");if(Z.useCanvas)if(pa.width=g+"px",pa.height=e+"px",pa.left=k+"px",pa.top=q+"px",ua=L(Ea,n.getZoom()),d=8<ua,aa||d){if(null!==oCtx&&"undefined"===typeof b||null===b||b&&F&&("in"!=Z.zooming||g>Z.scaleThreshold||
e>Z.scaleThreshold))oCtx.restore(),oCtx.save(),oCtx.scale(ua,ua),oCtx.rotate(Z.imageR*Math.PI/180),w(F,Ea,sa,"simple",!1,"Updating backfill oversize display");Qa=c=L(ea,a);g=c/tierBackfillScalePrior;c=Va*g;g*=Wa;e=Ga+(Va-c)/2;d=Ha+(Wa-g)/2;K.width=c+"px";K.height=g+"px";K.left=e+"px";K.top=d+"px"}else F&&Z.Utils.clearDisplay(F),g=Va*c,e=Wa*c,k=Ga+Z.imageX*(1-c)*Z.imageZ,q=Ha+Z.imageY*(1-c)*Z.imageZ,K.width=g+"px",K.height=e+"px",K.left=k+"px",K.top=q+"px";else w($,I,wa,"centerOut",!1,"Scaling: non-canvas zoom"),
aa?(c=vc,Va=na*c,Wa=oa*c,Ga=-(na/c),Ha=-(oa/c),Yb=Ra*c,Zb=Sa*c,V.width=Va,V.height=Wa,K.width=V.width+"px",K.height=V.height+"px"):(c=Ca[ea],V.width=ra[ea],V.height=c,c=Z.imageY*a,Ga=Ra-Z.imageX*a,Ha=Sa-c),K.left=Ga+"px",K.top=Ha+"px",w(V,ea,sa,"simple",!1,"Scaling: non-canvas zoom - backfill");c=!0}return c}function ub(){n.toggleFullViewMode(!1)}function k(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){Z.Utils.isRightMouseButton(a);if("mousedown"==b||"touchstart"==b||Z.tourPlaying&&Z.tourStop)n.zoomAndPanAllStop(),
Z.interactivityOff=!1;Z.touchSupport&&!Z.clickZoomAndPanBlock&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();if("mousedown"==b)window.setTimeout(function(){n.zoomAndPanAllStop(!1,!0)},1),Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();else if("touchstart"==b||"gesturestart"==b)a.preventDefault(),n.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();switch(b){case "mouseover":Z.fullView||"TEXTAREA"==document.activeElement.tagName||Z.Viewer.initializeViewerKeyDefaultListeners(!0);
break;case "mousedown":!Z.fullView&&document.activeElement&&document.activeElement.blur();Z.Viewer.initializeViewerKeyEventListeners(!0);Z.Utils.addEventListener(document,"mousemove",k);Z.Utils.addEventListener(document,"mouseup",k);break;case "mouseup":Z.Utils.removeEventListener(document,"mousemove",k),Z.Utils.removeEventListener(document,"mouseup",k)}Xa(a);if("mousedown"==b||"mousemove"==b)return!1}}function Xa(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var c,d;if("touchstart"==b||"touchmove"==
b||"touchend"==b||"touchcancel"==b)c=Z.Utils.getFirstTouch(a),"undefined"!==typeof c&&(d=new Z.Utils.Point(c.pageX,c.pageY));else{Z.Utils.target(a);Z.Utils.relatedTarget(a);Z.Utils.isRightMouseButton(a);var g=a.altKey;d=Z.Utils.getMousePosition(a);Z.smoothPan&&(vb=d)}"DOMMouseScroll"==b&&(b="mousewheel");var e=n.getZoom();"undefined"!==typeof d&&null!==d&&n.getClickCoordsInImage(a,e,d);switch(b){case "mousedown":Z.mouseIsDown=!0;Aa=new Z.Utils.Point(d.x,d.y);T.mouseXPrior=d.x;T.mouseYPrior=d.y;Z.Utils.hideMessage();
Z.smoothPan&&!g&&Z.mousePan&&1<Z.smoothPanEasing&&(t(void 0),$b=Aa,null===Eb&&(Eb=new Z.Utils.Point(parseFloat(u.left),parseFloat(u.top))),null===Ya&&(Ya=window.setInterval(Fc,50)));break;case "mousemove":Na=new Z.Utils.Point(d.x,d.y);Y&&(clearTimeout(Y),Y=null);!g&&Z.mousePan&&(Ya?vb=d:(e=d.x-T.mouseXPrior,a=d.y-T.mouseYPrior,isNaN(e)||isNaN(a)||(e=parseFloat(u.left)+e,a=parseFloat(u.top)+a,b=B(e,a,Z.imageZ,Z.imageR,"container"),u.left=b.x+"px",u.top=b.y+"px",T.mouseXPrior=d.x,T.mouseYPrior=d.y,
e=b.x-ia,a=b.y-ja,F&&aa&&(Z.mobileDevice||Math.abs(e)>fa/2||Math.abs(a)>ba/2)&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display"),Z.Navigator&&(d=n.calculateCurrentCenterCoordinates(b,Z.imageZ,Z.imageR),Z.Navigator.z658(d)))));break;case "mouseup":Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;Z.mouseOutDownPoint?(d=Z.mouseOutDownPoint,n.getClickCoordsInImage(a,e,Z.mouseOutDownPoint)):d=new Z.Utils.Point(d.x,d.y);d=Z.Utils.calculatePointsDistance(Aa.x,Aa.y,d.x,d.y);if(4>d)if(Z.clickZoom){d=
Y&&Z.doubleClickZoom?!0:!1;var k=n.getClickZoomCoords3D(a,Aa,I,P,d);Z.doubleClickZoom?Y?(clearTimeout(Y),Y=null,n.zoomAndPanToView(k.x,k.y,k.z)):Y=setTimeout(function(a){Y=null;n.zoomAndPanToView(k.x,k.y,k.z)},Z.doubleClickDelay):window.setTimeout(function(){n.zoomAndPanToView(k.x,k.y,k.z)},1)}else Z.clickPan&&n.zoomAndPanToView(k.x,k.y,Z.imageZ);else Na=null,Z.mousePan&&!Z.smoothPan&&n.updateView();Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&
1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1));break;case "touchstart":c&&!bb&&(Z.mouseIsDown=!0,Fb=!1,Aa=new Z.Utils.Point(d.x,d.y),T.mouseXPrior=d.x,T.mouseYPrior=d.y,Z.Utils.hideMessage());break;case "touchmove":!c||bb||Fb||(Na=new Z.Utils.Point(d.x,d.y),Y&&(clearTimeout(Y),Y=null),!g&&Z.mousePan&&(Ya?vb=d:(e=d.x-T.mouseXPrior,a=d.y-T.mouseYPrior,isNaN(e)||isNaN(a)||(e=parseFloat(u.left)+e,a=parseFloat(u.top)+a,b=B(e,a,Z.imageZ,Z.imageR,"container"),u.left=b.x+"px",u.top=b.y+"px",T.mouseXPrior=
d.x,T.mouseYPrior=d.y,e=b.x-ia,a=b.y-ja,F&&aa&&(Z.mobileDevice||Math.abs(e)>fa/2||Math.abs(a)>ba/2)&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display"),Z.Navigator&&(d=n.calculateCurrentCenterCoordinates(b,Z.imageZ,Z.imageR),Z.Navigator.z658(d))))));break;case "touchend":bb||Fb||(Z.mouseIsDown=!1,document.mousemove=null,document.mouseup=null,Z.mouseOutDownPoint?(d=Z.mouseOutDownPoint,n.getClickCoordsInImage(a,e,Z.mouseOutDownPoint)):d="undefined"!==typeof d&&null!==d?new Z.Utils.Point(d.x,
d.y):"undefined"!==typeof Na&&null!==Na?Na:Aa,d=Z.Utils.calculatePointsDistance(Aa.x,Aa.y,d.x,d.y),4>d?Z.clickZoom?(d=Y&&Z.doubleClickZoom?!0:!1,k=n.getClickZoomCoords3D(a,Aa,I,P,d),Z.doubleClickZoom?Y?(clearTimeout(Y),Y=null,n.zoomAndPanToView(k.x,k.y,k.z)):Y=setTimeout(function(a){Y=null;n.zoomAndPanToView(k.x,k.y,k.z)},Z.doubleClickDelay):window.setTimeout(function(){n.zoomAndPanToView(k.x,k.y,k.z)},1)):Z.clickPan&&n.zoomAndPanToView(k.x,k.y,Z.imageZ):(Na=null,Z.mousePan&&!Ya&&n.updateView()),
Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "touchcancel":bb||Fb||(Z.mouseIsDown=!1,document.mousemove=null,document.mouseup=null,Z.mouseOutDownPoint?(d=Z.mouseOutDownPoint,n.getClickCoordsInImage(a,e,Z.mouseOutDownPoint)):d="undefined"!==typeof d&&null!==d?new Z.Utils.Point(d.x,d.y):"undefined"!==typeof Na&&null!==Na?Na:Aa,d=Z.Utils.calculatePointsDistance(Aa.x,Aa.y,d.x,d.y),
4>d?Z.clickZoom?(d=Y&&Z.doubleClickZoom?!0:!1,k=n.getClickZoomCoords3D(a,Aa,I,P,d),Z.doubleClickZoom?Y?(clearTimeout(Y),Y=null,n.zoomAndPanToView(k.x,k.y,k.z)):Y=setTimeout(function(a){Y=null;n.zoomAndPanToView(k.x,k.y,k.z)},Z.doubleClickDelay):window.setTimeout(function(){n.zoomAndPanToView(k.x,k.y,k.z)},1)):Z.clickPan&&n.zoomAndPanToView(k.x,k.y,Z.imageZ):(Na=null,Z.mousePan&&!Ya&&n.updateView()),Z.mouseOutDownPoint&&(Z.ToolbarDisplay&&Z.toolbarAutoShowHide&&Z.Toolbar.show(!1),Z.NavigatorDisplay&&
1<Z.navigatorVisible&&Z.Navigator.setVisibility(!1)));break;case "gesturestart":Gc(a);bb||(bb=window.setInterval(Hc,Ic));break;case "gesturechange":ac=Math.round(100*a.scale)/100;break;case "gestureend":bb&&(window.clearInterval(bb),Fb=!0,bb=null),Z.mousePan&&n.updateView()}}}function t(a){null!==Ya&&a&&(window.clearInterval(Ya),Ya=null);Eb=bc=cc=Oa=null;smoothPanDeltaX=smoothPanDeltaY=jb=kb=0}function Fc(a){if(Z.mouseIsDown||Oa){var b=(Oa?bc:vb.x)-$b.x,c=(Oa?cc:vb.y)-$b.y,d=parseFloat(u.left)-Eb.x,
g=parseFloat(u.top)-Eb.y;if(!(isNaN(b)||isNaN(c)||isNaN(d)||isNaN(g)||0==b&&0==c&&0==d&&0==g)){var e=Oa?Z.smoothPanGlide:1;a=Oa?1:100;smoothPanDeltaX=Math.round((b-d)/(Z.smoothPanEasing*e)*a)/a;smoothPanDeltaY=Math.round((c-g)/(Z.smoothPanEasing*e)*a)/a;Z.mouseIsDown?(jb=smoothPanDeltaX,kb=smoothPanDeltaY):(Math.abs(smoothPanDeltaX)>Math.abs(jb)&&(smoothPanDeltaX=jb),Math.abs(smoothPanDeltaY)>Math.abs(kb)&&(smoothPanDeltaY=kb));c=parseFloat(u.left)+smoothPanDeltaX;d=parseFloat(u.top)+smoothPanDeltaY;
b=B(c,d,Z.imageZ,Z.imageR,"container");u.left=b.x+"px";u.top=b.y+"px";smoothPanDeltaX-=c-b.x;smoothPanDeltaY-=d-b.y;c=b.x-ia;d=b.y-ja;F&&aa&&(Oa||Z.mobileDevice||Math.abs(c)>fa/2||Math.abs(d)>ba/2)&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display");Oa&&0==Math.round(smoothPanDeltaX*a)/a&&0==Math.round(smoothPanDeltaY*a)/a&&(Oa=!1);Z.Navigator&&(a=n.calculateCurrentCenterCoordinates(b,Z.imageZ,Z.imageR),Z.Navigator.z658(a))}}else if(Z.mouseIsDown||null!==Oa||0==smoothPanDeltaX||0==smoothPanDeltaY)t(!0),
n.updateView();else if(a=parseFloat(u.left)+jb,b=parseFloat(u.top)+kb,b=B(a,b,Z.imageZ,Z.imageR,"container"),jb=b.x-parseFloat(u.left),kb=b.y-parseFloat(u.top),0!=jb||0!=kb)bc=vb.x+jb,cc=vb.y+kb,Oa=!0}function Gc(a){a=Z.Utils.event(a);a.preventDefault();ac=Math.round(100*a.scale)/100}function Hc(a){if(Z.mousePan){a=S(I,Za*ac);var b=J(a);a!=Z.imageZ&&n.z633(b)}}var Ob=0;"undefined"!==typeof a&&null!==a&&(Ob=a);var v;v="undefined"!==typeof b&&null!==b?b:Z.imagePath;var n=this,Sb=!1,gb=parseInt(Z.Utils.getResource("z90"),
10),rc=8*gb,sc=4*gb,Rb=0,Ia=parseInt(Z.Utils.getResource("z221"),10),Ja=parseInt(Z.Utils.getResource("z219"),10),dc=parseFloat(Z.Utils.getResource("z218")),U=dc/2,D=parseInt(Z.Utils.getResource("z220"),10),wc=1==Z.toolbarVisible?Z.toolbarH:0,lb,F,Pa,mb,T,u,ec,V,K,nb,fc,$,pa,ma,gc,Ta,Gb,Hb;(function(a){if("undefined"===typeof a||null===a)a=0;a=a.toString();Z.useCanvas&&!F&&(lb=Z.Utils.createContainerElement("canvas","oversizeDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none",
"0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(lb),F=lb,Pa=F.style);T||(mb=Z.Utils.createContainerElement("div","viewportContainer"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(mb),T=mb,u=T.style);V||(ec=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportBackfillDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","normal"),mb.appendChild(ec),V=ec,K=V.style);$||(fc=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),mb.appendChild(fc),$=fc,pa=$.style);Z.useCanvas&&!Ta&&(gc=Z.Utils.createContainerElement("canvas","transitionCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),mb.appendChild(gc),Ta=
gc,Gb=Ta.style);Z.useCanvas?(F&&(oCtx=F.getContext("2d")),nb=V.getContext("2d"),ma=$.getContext("2d"),Hb=Ta.getContext("2d")):(V.innerHTML="",$.innerHTML="")})(Ob);var ta=1,I=0,ea=0,aa=!1,Ea=0,Tb=!1,P,Za,Qa,ua,ra=[],Ca=[],la=[],Ba=[],Da=[],ob=[];tierTileOffsetsCount=[];tierTileOffsetChunks=[];tierTileOffsetLast=[];var db=[];tierTileByteCountsCount=[];tierTileByteCountChunks=[];tierTileByteCountLast=[];var eb=[],W=[],Ka=[],fb=[],wa=[],hb=[],pb=[],$a=[],Mb,xb,Cb,Bb,Vb,wb=null,Nb=0,Ec=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYLIMIT"),
10),uc=parseInt(Z.Utils.getResource("DEFAULT_VALIDATEVIEWRETRYDELAY"),10),sa=[],va=[],La=[],qa=[],qb=[],Ua=[],tc=0,Kb=0,Dc=new Z.NetConnector,kc=parseInt(Z.Utils.getResource("z81"),10),Jc=parseInt(Z.Utils.getResource("z78"),10),oc=parseInt(Z.Utils.getResource("z80"),10),Ab=parseInt(Z.Utils.getResource("z77"),10),Ea=Ab,mc=parseInt(Z.Utils.getResource("z79"),10),Jb=parseInt(Z.Utils.getResource("z76"),10),Ib=parseInt(Z.Utils.getResource("z75"),10),lc=null,nc=null,pc=null,qc=parseFloat(Z.Utils.getResource("z173"),
10),vc=parseFloat(Z.Utils.getResource("z74"),10),fa,ba,xc,Pb,na,oa,Ra,Sa,ia,ja,Va,Wa,Yb,Zb,Ga,Ha;fa=Z.viewerW;ba=Z.viewerH;xc=Pb=0;ba-=wc;0==Z.toolbarPosition&&(Pb+=wc);var Y=null,Aa,Na,bb=null,ac=null,Fb=!1,Ic=parseInt(Z.Utils.getResource("z122"),10),Qb=Math.round(parseFloat(Z.Utils.getResource("z176"))*Z.panSpeed),ya=0,za=0,jb=0,kb=0,Oa=null,bc=null,cc=null,Ya=null,$b=null,Eb=null,vb=null,yb=parseFloat(Z.Utils.getResource("z242"))*Z.zoomSpeed;Z.mobileDevice&&(yb/=2);var Fa=0,ab=null,Wb=0,Xb=parseInt(Z.Utils.getResource("z238"),
10),Ub=parseFloat(Z.Utils.getResource("z112"))*Z.fadeInSpeed,Lb=null,Kc=parseFloat(Z.Utils.getResource("z239")),hc=parseFloat(Z.Utils.getResource("z240"));Z.mobileDevice&&(hc/=2);var ib=null,Db=0;if(!Z.fullScreenVisible&&!Z.fullPageVisible)var yc,zc,Ac,Bc,ic,Cc,zb,jc;h(fa,ba,xc,Pb);if(null!==Z.imagePath&&"null"!=Z.imagePath){if(1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource){Z.Utils.showMessage(Z.Utils.getResource("z290"),!0);return}1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||
Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)&&Z.Utils.showMessage(Z.Utils.getResource("z288"),!0);var Lc=new Z.NetConnector;f(v,Lc,Ob)}this.setSizeAndPosition=function(a,b,c,d){h(a,b,c,d)};this.setSizeAndPositionMultiple=function(a,b,c,d){setSizeAndPositionMultiple(a,b,c,d)};this.loadImageProperties=function(a,b,c){f(a,b,c)};this.parseZIFHeader=function(a){e();if(73==a[0]&&73==a[1]&&43==a[2]&&0==a[3]&&8==a[4]&&0==a[5]&&0==a[6]&&0==a[7]&&16==a[8]&&
0==a[9]&&0==a[10]&&0==a[11]&&0==a[12]&&0==a[13]&&0==a[14]&&0==a[15]){for(var b=Z.Utils.longValue(a,8),c=Z.Utils.longValue(a,b),g=1,k=null,q=null,h=null,f=null,t=null,l=null,l=2;0!=b;){for(k=0;k<c;k++)switch(q=b+8+20*k,Z.Utils.shortValue(a,q)){case 256:ra[g-1]=Z.Utils.intValue(a,q+12);break;case 257:Ca[g-1]=Z.Utils.intValue(a,q+12);break;case 322:h=Z.Utils.intValue(a,q+12);break;case 323:f=Z.Utils.intValue(a,q+12);break;case 324:var m=tierTileOffsetsCount[g-1]=Z.Utils.longValue(a,q+4);ob[g-1]=Z.Utils.longValue(a,
q+12);t+=m;break;case 325:m=tierTileByteCountsCount[g-1]=Z.Utils.longValue(a,q+4),db[g-1]=1==m?Z.Utils.intValue(a,q+12):2==m?Z.Utils.intValue(a,q+12)+","+Z.Utils.intValue(a,q+16):Z.Utils.longValue(a,q+12)}b=Z.Utils.longValue(a,b+20*c+8);c=Z.Utils.longValue(a,b);g++}k=ra[0];q=Ca[0];ta=g-1;ra.reverse();Ca.reverse();tierTileOffsetsCount.reverse();ob.reverse();tierTileByteCountsCount.reverse();db.reverse();!isNaN(k)&&0<k&&!isNaN(q)&&0<q&&!isNaN(h)&&0<h&&!isNaN(f)&&0<f&&0<t?n.getInitialized()?z627(k,q,
h,f,t,l,null,null,null,null,null):d(k,q,h,f,t,l,null,null,null,null,null):"ZoomifyImageFolder"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z252")):Z.Utils.showMessage(Z.Utils.getResource("z250"))}};this.parseZIFOffsetChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",b);-1!=c&&(tierTileOffsetChunks[c].chunk=a,A(b,"offset"))};this.parseZIFByteCountChunk=function(a,b){var c=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",b);-1!=c&&(tierTileByteCountChunks[c].chunk=
a,A(b,"byteCount"))};this.parseZIFImage=function(a,b,c){a="data:image/jpeg;base64,"+Z.Utils.encodeBase64(a);var d;"image-display"==c?d=r:"image-backfill"==c?d=H:"navigator"==c&&(d=Z.Navigator.z556);b=Z.Utils.createCallback(null,d,b);Z.Utils.createImageElementFromBytes(a,b)};this.z602=function(a){m(a)};this.validateXYZDefaults=function(a){a&&Z.Utils.resetParametersXYZ(Z.parameters);var b=parseFloat(Z.Utils.getResource("z143")),c=parseFloat(Z.Utils.getResource("z144")),d=parseFloat(Z.Utils.getResource("z145")),
g=parseFloat(Z.Utils.getResource("DEFAULT_INITIALR")),e=parseFloat(Z.Utils.getResource("z163"));a=parseFloat(Z.Utils.getResource("z153"));b=isNaN(b)?null:b;c=isNaN(c)?null:c;d=isNaN(d)?null:d;g=isNaN(g)?null:g;e=isNaN(e)?null:e;a=isNaN(a)?null:a;Z.parameters?(Z.parameters.zInitialX||(Z.initialX=b),Z.parameters.zInitialY||(Z.initialY=c),Z.parameters.zInitialZoom||(Z.initialZ=d),Z.parameters.zInitialRotation||(Z.initialR=g),Z.parameters.zMinZoom||(Z.minZ=e),Z.parameters.zMaxZoom||(Z.maxZ=a)):(Z.initialX=
b,Z.initialY=c,Z.initialZ=d,Z.initialR=g,Z.minZ=e,Z.maxZ=a);null===Z.initialX&&(Z.initialX=Z.imageW/2);null===Z.initialY&&(Z.initialY=Z.imageH/2);Z.fitZ=n.z468(0);a=n.getInitialized()?n.getRotation():Z.initialR;Z.fitR=n.z468(a);if(null===Z.initialZ||-1==Z.initialZ)Z.initialZ=Z.fitR;if(null===Z.minZ||-1==Z.minZ)Z.minZ=Z.fitZ;if(null===Z.maxZ||-1==Z.maxZ)Z.maxZ=Z.fitZ;Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ);Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)};this.getInitialized=function(){return Sb};this.getParsingXML=
function(){return parsingXML};this.getAnnotationsLoaded=function(){return!1};this.getW=function(){return na};this.getImagePath=function(){return v};this.setImagePath=function(a){v=a};this.getViewportID=function(){return Ob};this.getH=function(){return oa};this.getTierCount=function(){return ta};this.getTileW=function(){return Ia};this.getTileH=function(){return Ja};this.getTierCurrent=function(){return I};this.getTierBackfill=function(){return ea};this.getTierBackfillDynamic=function(){return aa};
this.getTierBackfillOversize=function(){return Ea};this.getTierScale=function(){return P};this.getX=function(){var a=parseFloat(u.left)-ia,b=n.getZoom();return Z.imageX-a/b};this.getY=function(){var a=parseFloat(u.top)-ja,b=n.getZoom();return Z.imageY-a/b};this.getZoom=function(){return S(I,P)};this.getRotation=function(){return Z.imageR};this.getTiersScaleUpMax=function(){return dc};this.getTiersScaleDownMax=function(){return U};this.getTilesCacheMax=function(){return D};this.getTierWs=function(){return ra.join(",")};
this.getTierHs=function(){return Ca.join(", ")};this.getTierTileCounts=function(){return Da.join(", ")};this.getTilesLoadingNames=function(){return""==W.join(", ")?"Current view loading complete":W.join(", ")};this.getConstrainPan=function(a){return Z.constrainPan};this.setConstrainPan=function(a){0==a&&(Z.constrainPan=!1);Z.constrainPanStrict=2==a?!0:!1;Z.constrainPan&&Z.constrainPanStrict&&n.toggleConstrainPan(!0)};this.getSmoothPan=function(){return Z.smoothPan};this.setSmoothPan=function(a){Z.smoothPan=
a};this.getSmoothPanEasing=function(){return Z.smoothPanEasing};this.setSmoothPanEasing=function(a){Z.smoothPanEasing=a};this.getSmoothPanGlide=function(){return Z.smoothPanGlide};this.setSmoothPanGlide=function(a){Z.smoothPanGlide=a};this.setVisibility=function(a){a=a?"inline-block":"none";lb&&!Pa&&(Pa=lb.style);Pa&&(Pa.display=a);mb&&!u&&(u=mb.style);u&&(u.display=a)};this.updateView=function(b){if("undefined"!==typeof b&&!0===b||P!=Za||n.getZoom()!=Z.imageZ||parseFloat(u.left)!=ia||parseFloat(u.top)!=
ja){if(!Z.slideStack||a>Z.viewportCurrentID-1&&a<Z.viewportCurrentID+1){var c=!1,d=!1;if(parseFloat(u.left)!=ia||parseFloat(u.top)!=ja)c=!0;if(P!=Za||Z.imageZ!=Z.priorZ)d=!0;ka();var g=!1;if(b||parseFloat(pa.width)!=$.width)Z.useCanvas&&(pa.width=$.width+"px",pa.height=$.height+"px",pa.left="0px",pa.top="0px",ma.restore(),ma.save(),ma.scale(P,P),V&&(aa?(K.width=V.width+"px",K.height=V.height+"px",K.left=Ga+"px",K.top=Ha+"px",nb.restore(),nb.save(),nb.scale(Qa,Qa)):(K.width=Va+"px",K.height=Wa+"px",
K.left=Ga+"px",K.top=Ha+"px"))),g=!0;if(b||parseFloat(u.left)!=ia||parseFloat(u.top)!=ja){var g=parseFloat(u.left)-ia,e=parseFloat(u.top)-ja;0!=Z.imageR&&(e=Z.Utils.rotatePoint(g,e,Z.imageR),g=e.x,e=e.y);u.left=ia+"px";u.top=ja+"px";aa||(Ga=parseFloat(K.left)+g,Ha=parseFloat(K.top)+e,K.left=Ga+"px",K.top=Ha+"px");var k=n.getZoom();Z.imageX-=g/k;Z.imageY-=e/k;g=!0}g&&(w($,I,wa,"centerOut",!1,"1a. Updating view: resetting display positions"),aa&&w(V,ea,sa,"simple",!1,"1b. Updating view: resetting backfill positions"));
g=!1;if("undefined"!==typeof b&&b||P!=Za||n.getZoom()!=Z.imageZ||!Sb){P!=Za&&(Z.imageZ=n.getZoom());Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);k=dc;for(e=ta;k/2>=Z.imageZ;)e--,k/=2;e=0>e-1?0:e-1;k=L(e,Z.imageZ);if(e!=I||k!=P)Z.useCanvas&&(ma.restore(),ma.save(),ma.scale(k,k)),I!=e&&(Tb=!0),I=e,P=k;Za=P;aa=!1;I>kc?(ea=I-Jc,aa=!0):ea=I>oc?Ab:I>mc?Jb:Ib;tierBackfillScalePrior=Qa=L(ea,Z.imageZ);var e=ra[ea],k=Ca[ea],q=Z.imageX*Z.imageZ,h=Z.imageY*Z.imageZ;aa?(e=vc,Va=na*e,Wa=oa*e,Ga=-(na/e),Ha=-(oa/e),Yb=Ra*
e,Zb=Sa*e,V.width=Va,V.height=Wa,K.width=V.width+"px",K.height=V.height+"px",K.left=Ga+"px",K.top=Ha+"px",Z.useCanvas&&(F&&(ua=L(Ea,Z.imageZ),oCtx.restore(),oCtx.save(),oCtx.scale(ua,ua),0!=Z.imageR&&oCtx.rotate(Z.imageR*Math.PI/180)),nb.restore(),nb.translate(Yb,Zb),nb.save(),nb.scale(Qa,Qa))):(Va=e*Qa,Wa=k*Qa,Ga=Ra-q,Ha=Sa-h,V.width=e,V.height=k,Z.useCanvas&&(K.width=Va+"px",K.height=Wa+"px"),K.left=Ga+"px",K.top=Ha+"px");w(V,ea,sa,"simple",!1,"2. Updating view: changing tier - backfill");!b&&0<
D&&(g=!0)}else n.validateView("updateView-noChange");aa?s(!0):F&&Z.Utils.clearDisplay(F)}s();w($,I,null,"centerOut",g,"3. Updating view: prior to loading of any new tiles");0<W.length&&y(W,r,"centerOut","image-display");n.syncViewportRelated();c&&Z.Utils.validateCallback("viewPanned");d&&Z.Utils.validateCallback("viewZoomed");(c||d)&&Z.Utils.validateCallback("viewChanged")}};syncTransitionCanvas=function(){Ta.width=$.width;Ta.height=$.height;Gb.width=pa.width;Gb.height=pa.height;Gb.left=pa.left;Gb.top=
pa.top;Hb.restore();Hb.save();Hb.translate(Ra,Sa);Hb.scale(P,P)};this.formatTilePath=function(a,b,c,d){var g;if("ZoomifyImageFile"==Z.tileSource){g="offsetLoading";var e="loading",k="loading",q;if(1==tierTileOffsetsCount[a])e=ob[a];else{var h=new ha(a,b,c),f=h.chunkID+","+a+","+b+","+c+","+d+",offset";q=Z.Utils.arrayIndexOfObjectValue(tierTileOffsetChunks,"chunkID",h.chunkID);-1==q?(n.validateView("z532",h.chunkID+","+a+","+b+","+c+","+d),-1==Z.Utils.arrayIndexOf(qa,f)&&(qa[qa.length]=f),tierTileOffsetChunks[tierTileOffsetChunks.length]=
{chunkID:h.chunkID,chunk:"loading"},q=new Z.NetConnector,q.loadByteRange(v,h.chunkStart,h.chunkEnd,"offset",null,h.chunkID)):"loading"==tierTileOffsetChunks[q].chunk?-1==Z.Utils.arrayIndexOf(qa,f)&&(qa[qa.length]=f):"loading"!=tierTileOffsetChunks[q].chunk&&(q=tierTileOffsetChunks[q].chunk,e=Z.Utils.longValue(q,h.offsetStartInChunk))}1==tierTileByteCountsCount[a]?k=db[a]:(q=b+c*la[a],2==tierTileByteCountsCount[a]?(a=db[a],k=0==q?a.substring(0,a.indexOf(",")):a.substring(a.indexOf(",")+1,a.length)):
(h=new Q(a,b,c),a=h.chunkID+","+a+","+b+","+c+","+d+",byteCount",q=Z.Utils.arrayIndexOfObjectValue(tierTileByteCountChunks,"chunkID",h.chunkID),-1==q?(-1==Z.Utils.arrayIndexOf(qa,a)&&(qa[qa.length]=a),tierTileByteCountChunks[tierTileByteCountChunks.length]={chunkID:h.chunkID,chunk:"loading"},q=new Z.NetConnector,q.loadByteRange(v,h.chunkStart,h.chunkEnd,"byteCount",null,h.chunkID)):"loading"==tierTileByteCountChunks[q].chunk?-1==Z.Utils.arrayIndexOf(qa,a)&&(qa[qa.length]=a):"loading"!=tierTileByteCountChunks[q].chunk&&
(q=tierTileByteCountChunks[q].chunk,k=Z.Utils.intValue(q,h.bcStartInChunk))));"loading"==e||isNaN(e)||"loading"==k||isNaN(k)||(g=v+"?"+e.toString()+","+k.toString())}else if("ZoomifyImageFolder"==Z.tileSource){g=c*la[a]+b;for(e=0;e<a;e++)g+=Da[e];a=v+"/TileGroup"+Math.floor(g/256)+"/"+a+"-"+b+"-"+c+"."+Z.tileType;if(Z.browser==Z.browsers.IE&&9>Z.browserVersion||0==D)a=Z.Utils.cacheProofPath(a);g=a}return g};this.getClickCoordsAtZoom=function(a,b){var c=this.getClickCoordsInImage(a,b);return new Z.Utils.Point(c.x*
b,c.y*b)};this.getClickCoordsInImage=function(a,b,c){a=Z.Utils.event(a);var d=null;if(a){var g=a.type;if("undefined"===typeof c||null===c)"touchstart"==g||"touchend"==g||"touchcancel"==g?(touch=Z.Utils.getFirstTouch(a),"undefined"!==typeof touch&&(target=touch.target,c=new Z.Utils.Point(touch.pageX,touch.pageY))):(target=Z.Utils.target(a),relatedTarget=Z.Utils.relatedTarget(a),c=Z.Utils.getMousePosition(a));"undefined"!==typeof c&&null!==c&&(a=O(c.x,c.y),d=da(a.x,a.y,b))}return d};this.getClickZoomCoords3D=
function(a,b,c,d,g){var e=parseFloat(Z.Utils.getResource("z93TIERSKIPTHRESHOLD"));b=O(b.x,b.y);b=da(b.x,b.y,Z.imageZ);var k=S(c,d);a=a.altKey;g?a?k=Z.fitZ:(g=L(c,Z.fitZ),d-g<e?k=Z.fitZ:d>1+e?k=S(c,1):0<c&&(k=S(c-1,1))):a?k=1:d<1-e?k=S(c,1):c<ta-1&&(k=S(c+1,1));return new Z.Utils.Point3D(b.x,b.y,k)};this.calculateCurrentCenterCoordinates=function(a,b,c){if("undefined"===typeof a||null===a)a=new Z.Utils.Point(parseFloat(u.left),parseFloat(u.top));if("undefined"===typeof c||null===c)c=Z.imageR;0>c&&
(c+=360);if("undefined"===typeof b||null===b)b=n.getZoom();var d=(a.x-ia)/b;a=(a.y-ja)/b;var g,e;switch(c){case 0:g=Z.imageX-d;e=Z.imageY-a;break;case 90:g=Z.imageX-a;e=Z.imageY+d;break;case 180:g=Z.imageX+d;e=Z.imageY+a;break;case 270:g=Z.imageX+a,e=Z.imageY-d}return new Z.Utils.Point(g,e)};this.z542=function(a,b){if("undefined"===typeof a||null===a)a=I;if("undefined"===typeof b||null===b)b=!1;return new N(n.z541(b),a)};this.z541=function(a){var b=parseFloat(u.left)-ia,c=parseFloat(u.top)-ja;if(Z.useCanvas)var d=
parseFloat(u.width)/T.width,b=b/d,c=c/d;d=n.getZoom();0!=b&&(b/=d);0!=c&&(c/=d);b=Z.imageX-b;c=Z.imageY-c;if(a){a=-(fa/2);var g=fa/2,e=-(ba/2),k=ba/2}else a=-(na/2),g=na/2,e=-(oa/2),k=oa/2;return new C(b,c,a,g,e,k,d)};this.z468=function(a){var b=Z.imageW/Z.imageH>fa/ba?fa/Z.imageW:ba/Z.imageH;if(90==a||270==a)b=Z.imageW/Z.imageH>fa/ba?fa/Z.imageH:ba/Z.imageW;return b};this.z482=function(a,b){return S(a,b)};this.syncViewportToNavigator=function(a){var b=Z.imageR;0>b&&(b+=360);var c=B(a.x,a.y,Z.imageZ,
b,"image");a=Z.imageY;var d=c.y,c=dX=Z.imageX-c.x;a=dY=a-d;0!=b&&(90==b?(c=-dY,a=dX):180==b?(c=-dX,a=-dY):270==b&&(c=dY,a=-dX));b=c*Z.imageZ;a*=Z.imageZ;d=a+ja;u.left=b+ia+"px";u.top=d+"px";F&&aa&&(Z.mobileDevice||Math.abs(b)>fa/2||Math.abs(a)>ba/2)&&w(F,Ea,sa,"simple",!1,"Updating backfill oversize display")};this.updateProgress=function(a,b){var c=Z,d;0==a&&0==b?(Z.Utils.validateCallback("loadingTilesComplete"),Z.Utils.validateCallback("loadingTilesCompleteGetLabelIDs"),d=void 0):(d=Math.round(100-
b/a*100),d=Math.round(d/10));c.updateViewPercent=d;Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&Z.Toolbar.updateProgress(a,b)};this.validateView=function(a,b,c,d){c="undefined"!==typeof c&&null!==c?c:null;b=null!==b?b:"";switch(a){case "tilesToDisplay":xb=Mb=0;Cb=c;Bb=0;tilesTimeStart=(new Date).getTime();Vb=0;window.clearTimeout(wb);wb=null;wb=window.setTimeout(E,uc);break;case "z581-image-display":Mb+=1;break;case "onTileLoad":xb+=1;Bb=((new Date).getTime()-c)/1E3;Vb=xb/Bb;break;case "z507":a=
Z.Utils.arrayIndexOf(eb,b),-1!==a&&(eb.splice(a,1),--Cb)}};this.setView=function(a,b,c,d,g,e){q(a,b,c,d,g,e)};this.zoom=function(a){if("stop"!=a||"stop"!=Z.zooming){switch(a){case "out":0<=Fa&&(Fa-=yb);break;case "in":0>=Fa&&(Fa+=yb);break;case "stop":Fa=0}Z.zooming=0==Fa?"stop":0<Fa?"in":"out";0!=Fa?ab||(ab=window.setTimeout(Ma,Xb)):(tb(),n.updateView())}};this.pan=function(a){if("horizontalStop"!=a||"stop"!=Z.panningX)if("verticalStop"!=a||"stop"!=Z.panningY){switch(a){case "left":0>=ya&&(ya+=Qb);
break;case "up":0>=za&&(za+=Qb);break;case "down":0<=za&&(za-=Qb);break;case "right":0<=ya&&(ya-=Qb);break;case "horizontalStop":ya=0;break;case "verticalStop":za=0;break;case "stop":za=ya=0}Z.panningX=0==ya?"stop":0<ya?"left":"right";Z.panningY=0==za?"stop":0<za?"up":"down";S(I,1);S(I,1);0!=ya||0!=za?ab||(ab=window.setTimeout(Ma,Xb)):(tb(),n.updateView())}};this.zoomAndPanToView=function(a,b,c,d,g,e,k){n.zoomAndPanAllStop();if(Z.clickZoomAndPanBlock)Z.clickZoomAndPanBlock=!1;else{if("undefined"===
typeof a||null===a)a=Z.imageX;if("undefined"===typeof b||null===b)b=Z.imageY;if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;if("undefined"===typeof g||null===g)g=Kc;if("undefined"===typeof e||null===e)e=hc;if("center"==a||isNaN(parseFloat(a)))a=Z.imageCenterX;if("center"==b||isNaN(parseFloat(b)))b=Z.imageCenterY;if(-1==c||isNaN(parseFloat(c)))b=Z.fitZ;if("undefined"===typeof a||null===a)a=Z.initialX;if("undefined"===typeof b||null===b)b=Z.initialY;if("undefined"===
typeof d||null===d)d=Z.imageR;"undefined"===typeof c||null===c?c=Z.initialZ:1<c&&2>c&&0!=c%1?c=1:1<c?c/=100:.99<c&&1>c&&0!=100*c%1&&(c=1);b=B(a,b,c,d,"image");a=b.x;b=b.y;c=J(c);if(Math.round(a)!=Math.round(Z.imageX)||Math.round(b)!=Math.round(Z.imageY)||Math.round(1E5*c)!=Math.round(1E5*Z.imageZ)||Math.round(d)!=Math.round(Z.imageR))Z.interactivityOff=!0,Db=0,sb(a,b,c,d,g,e,k)}};this.zoomAndPanAllStop=function(a,b){Z.interactivityOff||(ib&&ib&&(window.clearTimeout(ib),ib=null),Z.tourPlaying&&b&&
(n.tourStop(),a=!1),Z.slideshowPlaying&&b&&(n.slideshowStop(),a=!1),Z.smoothPan&&null!==Ya&&(Z.mouseIsDown||t(!0),a=!0),a||n.updateView())};this.syncViewportRelated=function(a,b,c,d,g){if("undefined"==typeof c||c)Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(a=n.getZoom(),Z.Toolbar.syncSliderToViewport(a)),Z.Utils.validateCallback("viewZoomingGetCurrentZoom");("undefined"==typeof d||d)&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Navigator.syncToViewport()};this.z633=function(a,b){rb(a,b)&&n.syncViewportRelated()};
this.reset=function(a){a?n.zoomAndPanToView(Z.priorX,Z.priorY,Z.priorZ,Z.priorR):n.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ,Z.initialR);ka(!0)};this.toggleFullViewModeExternal=function(){jc=!0;n.toggleFullViewMode()};this.toggleFullViewMode=function(a,b){Z.maskingSelection&&Z.maskClearOnUserAction&&n.clearMask();var c=null,d=null;Z.fullView="undefined"!==typeof a&&null!==a?a:!Z.fullView;var g=document.body.style,e=document.documentElement.style,k=Z.ViewerDisplay.style,d=Z.Utils.getElementStyle(Z.pageContainer);
Z.fullView?(yc=g.width,zc=g.height,Ac=g.overflow,Bc=e.overflow,ic=Z.Utils.stringValidate(d.backgroundColor)&&"transparent"!=d.backgroundColor?d.backgroundColor:Z.Utils.stringValidate(g.backgroundColor)&&"transparent"!=g.backgroundColor?g.backgroundColor:Z.Utils.getResource("z120"),Cc=k.zIndex,Z.fullScreenSupported&&!Z.fullPageVisible?(fullScreenEntering=!0,Z.Utils.fullScreenView(Z.ViewerDisplay,!0),d=Z.Utils.getScreenSize()):(d=Z.Utils.getWindowSize(),Z.mobileDevice?(g.width=d.x,g.height=d.y):(g.width=
"100%",g.height="100%")),c=d.x,d=d.y,g.overflow="hidden",e.overflow="hidden",k.backgroundColor=ic,k.position="fixed",k.zIndex="99999999"):(g.overflow=Ac,e.overflow=Bc,k.backgroundColor=ic,k.position="relative",k.zIndex=Cc,Z.fullScreenSupported&&!Z.fullPageVisible&&Z.Utils.fullScreenView(Z.ViewerDisplay,!1,b),g.width=yc,g.height=zc,c=parseFloat(d.width),d=parseFloat(d.height),isNaN(c)&&(c=Z.ViewerDisplay.clientWidth),isNaN(d)&&(d=Z.ViewerDisplay.clientHeight),jc=!1);Z.viewerW=c;Z.viewerH=d;"multiple"!=
Z.imagePath?n.setSizeAndPosition(c,d):n.setSizeAndPositionMultiple(c,d);g=document.getElementById("buttonFullView");e=document.getElementById("buttonFullViewExit");g&&e&&(g.style.display=Z.fullView?"none":"inline-block",e.style.display=Z.fullView?"inline-block":"none");jc?(zb||(g=Z.Utils.getResource("z420"),e=parseFloat(Z.viewerW)-54,k=parseFloat(Z.viewerH)-54,d=Z.Utils.getResource("DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR"),zb=new Z.Utils.Button("buttonFullViewExitExternal",g,null,null,null,null,
"34px","34px",e+"px",k+"px","mousedown",ub,"z391EXITEXTERNAL","solid","1px",d,"0px","0px"),Z.ViewerDisplay.appendChild(zb.elmt)),zb.elmt.style.display="inline-block"):zb&&(zb.elmt.style.display="none");Z.ToolbarDisplay&&Z.Toolbar.getInitialized()&&(Z.toolbarCurrentW=-1==Z.toolbarW?c:Z.toolbarW,Z.Toolbar.setSizeAndPosition(Z.toolbarCurrentW,null,null,1==Z.toolbarPosition?Z.viewerH-Z.toolbarH:0));Z.NavigatorDisplay&&Z.Navigator.getInitialized()&&Z.Navigator.setSizeAndPosition(Z.navigatorW,Z.navigatorH,
Z.navigatorL,Z.navigatorT);Z.RulerDisplay&&Z.Ruler.getInitialized()&&Z.Ruler.setSizeAndPosition(null,null,null,null);n.validateXYZDefaults();Z.imageZ=J(Z.imageZ);c=parseFloat(u.left);g=parseFloat(u.top);c=B(c,g,Z.imageZ,Z.imageR,"container");u.left=c.x+"px";u.top=c.y+"px";n.updateView(!0)};this.fullScreenEscapeHandler=function(a){fullScreenEntering?fullScreenEntering=!1:n.toggleFullViewMode(!1,!0)};this.mouseWheelHandler=function(a){var b=n.z482(I,P*(1+(0<a?yb:-yb)));constrainedZ=J(b);constrainedZ!=
Z.imageZ&&(Z.zooming=0<a?"in":0>a?"out":"stop",n.z633(constrainedZ))}};
Z.ZoomifyToolbar=function(a){function b(){window.clearInterval(O);O=null;var a=document.getElementById("progressTextBoxCenteredDiv");a&&(a=a.firstChild)&&(a.nodeValue="")}function c(a){4>Z.toolbarVisible&&!Z.mobileDevice||8==Z.toolbarVisible?d(a):e(!a)}function d(a){Q&&(Q.display=a?"inline-block":"none")}function e(a){Z.ToolbarMinimized=a;if(Q){var b=document.getElementById("buttonContainer"),c=document.getElementById("toolbarBackground"),d=document.getElementById("buttonMinimize"),e=document.getElementById("buttonExpand"),
h=document.getElementById("logoDivider"),f=0;e&&!L&&(f=parseFloat(e.style.left)+parseFloat(e.style.width)+4);var l=Z.toolbarCurrentW;a?(b&&(b.style.display="none"),d&&e&&!L&&(h&&(h.style.display="none"),d.style.display="none",e.style.display="inline-block"),Q.width=f+"px",c&&(c.style.width=f+"px")):(b&&(b.style.display="inline-block"),d&&e&&!L&&(h&&(h.style.display="inline-block"),d.style.display="inline-block",e.style.display="none"),Q.width=l+"px",c&&(c.style.width=l+"px"))}}function h(a){if(A&&
X){a=(a-Z.minZ)/(Z.maxZ-Z.minZ);var b=parseFloat(A.style.left),c=parseFloat(A.style.left)+parseFloat(A.style.width)-parseFloat(X.style.width)-b;X.style.left=a*c+b+"px"}}function f(a){X&&(M=!0,a=Z.Utils.getMousePosition(a),X.mouseXPrior=a.x,X.mouseYPrior=a.y)}function m(){if(A&&X){var b=parseFloat(A.style.left),c=parseFloat(A.style.left)+parseFloat(A.style.width)-parseFloat(X.style.width),d=parseFloat(X.style.left)+(C.x-X.mouseXPrior);d<b?d=b:d>c?d=c:X.mouseXPrior=C.x;X.style.left=d+"px";b=Z.minZ+
(d-b)/(c-b)*(Z.maxZ-Z.minZ);c=b-a.getZoom();Z.zooming=0<c?"in":0>c?"out":"stop";a.z633(b)}}function l(b){if(b=Z.Utils.event(b)){var c=b.type,d=Z.Utils.target(b);if(d){var e=d.parentNode;if(e){var h=e;tbID=e.id}}d=Z.Utils.relatedTarget(b)}"mousedown"==c&&a&&(a.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&a.clearMask());if((!Z.interactivityOff||"mousedown"!=c&&"mouseup"!=c||"buttonRotateClockwise"==tbID||"buttonRotateCounterwise"==tbID)&&(!d||"[object HTMLSelectElement]"!=d&&
"[object HTMLOptionElement]"!=d)&&!Z.Utils.isRightMouseButton(b)){Z.touchSupport&&b.preventDefault();if("viewportContainer"==tbID||M)if(e=document.getElementById("buttonSlider"))tbID=e.id;var d=e,y=c;if(-1!=d.id.indexOf("button")&&-1==d.id.indexOf("buttonContainer")){var G=d.firstChild,r=d.childNodes[1],A=d.childNodes[2];if(G&&r&&A)if(G=G.style,r=r.style,A=A.style,G.visibility=r.visibility=A.visibility="hidden","mouseover"==y&&"buttonSlider"==d.id&&M)A.visibility="visible";else if("mouseover"==y||
"mouseup"==y)r.visibility="visible";else if("mousedown"==y||"mousemove"==y||"touchstart"==y||"MSPointerDown"==y)A.visibility="visible";else if("mouseout"==y||"touchend"==y||"touchcancel"==y||"MSPointerUp"==y)G.visibility="visible"}if(tbID&&"buttonBackground"!=tbID&&c)switch(c){case "mouseover":Z.Utils.removeEventListener(e.childNodes[0],"mouseover",l);Z.Utils.addEventListener(e.childNodes[1],"mousedown",l);Z.Utils.addEventListener(e.childNodes[1],"mouseout",l);M&&h&&Z.Utils.addEventListener(h.childNodes[0],
"mouseup",l);break;case "mousedown":"trackSlider"!=tbID&&(Z.Utils.removeEventListener(e.childNodes[1],"mousedown",l),Z.Utils.removeEventListener(e.childNodes[1],"mouseout",l),Z.Utils.addEventListener(e.childNodes[2],"mouseup",l),Z.Utils.addEventListener(e.childNodes[2],"mouseout",l),"buttonSlider"==tbID&&(f(b),w(b),Z.Utils.addEventListener(document,"mousemove",w),N||(N=window.setInterval(m,ca)),Z.Utils.addEventListener(document,"mouseup",l)));a&&s(b,tbID);break;case "mouseup":Z.Utils.removeEventListener(e.childNodes[2],
"mouseup",l);Z.Utils.removeEventListener(e.childNodes[2],"mouseout",l);Z.Utils.addEventListener(e.childNodes[1],"mousedown",l);Z.Utils.addEventListener(e.childNodes[1],"mouseout",l);M&&h&&Z.Utils.removeEventListener(h.childNodes[0],"mouseup",l);a&&s(b,tbID);break;case "mouseout":Z.Utils.removeEventListener(e.childNodes[1],"mousedown",l);Z.Utils.removeEventListener(e.childNodes[1],"mouseout",l);Z.Utils.addEventListener(e.childNodes[0],"mouseover",l);a&&s(b,tbID);break;case "touchstart":"buttonSlider"==
tbID&&(f(b),x(b),Z.Utils.addEventListener(document,"touchmove",x),N||(N=window.setInterval(m,ca)));Z.Utils.addEventListener(e,"touchend",l);Z.Utils.addEventListener(e,"touchcancel",l);a&&s(b,tbID);break;case "touchend":Z.Utils.addEventListener(e,"touchstart",l);a&&s(b,tbID);break;case "touchcancel":Z.Utils.addEventListener(e,"touchstart",l);a&&s(b,tbID);break;case "MSPointerDown":"buttonSlider"==tbID&&(f(b),x(b),Z.Utils.addEventListener(document,"MSPointerMove",x),N||(N=window.setInterval(m,ca)));
Z.Utils.addEventListener(e,"MSPointerUp",l);a&&s(b,tbID);break;case "MSPointerUp":Z.Utils.addEventListener(e,"MSPointerDown",l),a&&s(b,tbID)}}}function s(b,c){var d=b.type;if("mousedown"==d||"touchstart"==d){var e=b.altKey,d=document.activeElement.id;!Z.Utils.stringValidate(d)||d!="poiNameTextElement"+R&&d!="labelNameTextElement"+R&&"captionTextElement"!=d&&"tooltipTextElement"!=d&&"clickURLTextElement"!=d&&d!="noteNameTextElement"+R&&d!="noteTextElement"+R||document.getElementById(d).blur();switch(c){case "buttonMinimize":y.minimize(!0);
Z.Navigator&&Z.Navigator.setVisibility(!1);break;case "buttonExpand":y.minimize(!1);Z.Navigator&&Z.Navigator.setVisibility(!0);break;case "buttonZoomOut":e||a.zoom("out");break;case "trackSlider":A&&(e=Z.Utils.getElementPosition(A),e=Z.Utils.getMousePosition(b).x-e.x,d=parseFloat(A.style.width),e=Z.minZ+(e-0)/(d-0)*(Z.maxZ-Z.minZ),e<Z.minZ+.1&&(e=Z.minZ),e>Z.maxZ-.1&&(e=Z.maxZ),d=e-a.getZoom(),Z.zooming=0<d?"in":0>d?"out":"stop",a.z633(e),Z.zooming="stop",a.updateView());break;case "buttonZoomIn":e||
a.zoom("in");break;case "buttonPanLeft":a.pan("left");break;case "buttonPanUp":a.pan("up");break;case "buttonPanDown":a.pan("down");break;case "buttonPanRight":a.pan("right");break;case "buttonReset":a.reset(e);break;case "buttonHelp":Z.annotations&&null===Z.editMode?Z.Utils.showHelp(Z.Utils.getResource("z32")+Z.Utils.getResource("z30")+Z.Utils.getResource("z29")):Z.Utils.showHelp(Z.Utils.getResource("z32"))}}else if("mouseup"==d||"touchend"==d||"touchcancel"==d)if("buttonSlider"==c||M){N&&(window.clearInterval(N),
N=null);M&&(Z.Utils.removeEventListener(document,"mousemove",w),Z.Utils.removeEventListener(document,"mouseup",l),Z.Utils.removeEventListener(document,"touchmove",x));for(var e=Z.ToolbarDisplay.childNodes,d=0,h=e.length;d<h;d++){var f=e[d],m=f.id;if(m&&-1!=m.indexOf("button"))if("buttonContainer"!=m&&"buttonContainerImageFilter"!=m)Z.Utils.setButtonDefaults(f);else for(var f=f.childNodes,m=0,G=f.length;m<G;m++){var r=f[m],k=r.id;k&&-1!=k.indexOf("button")&&Z.Utils.setButtonDefaults(r)}}M=!1;Z.zooming=
"stop";a.updateView()}else"buttonZoomOut"==c||"buttonZoomIn"==c?(a.zoom("stop"),0==Z.debug&&"buttonZoomOut"==c&&e&&Z.Utils.showGlobals(),"buttonZoomIn"==c&&e&&a.toggleEditMode()):"buttonPanLeft"==c||"buttonPanRight"==c?(a.pan("horizontalStop"),"buttonPanLeft"==c&&e&&a.toggleSmoothPan()):"buttonPanUp"==c||"buttonPanDown"==c?a.pan("verticalStop"):"buttonFullView"==c?a.toggleFullViewMode(!0):"buttonFullViewExit"==c&&a.toggleFullViewMode(!1);else"mouseout"==d&&("buttonZoomOut"==c||"buttonZoomIn"==c?a.zoom("stop"):
"buttonPanLeft"==c||"buttonPanRight"==c?a.pan("horizontalStop"):"buttonPanUp"!=c&&"buttonPanDown"!=c||a.pan("verticalStop"))}function w(a){C=new Z.Utils.Point(a.clientX,a.clientY)}function x(a){(a=Z.Utils.getFirstTouch(a))&&(C=new Z.Utils.Point(a.pageX,a.pageY))}var y=this,G=!1,R=a.getViewportID().toString();Z.skinPath=Z.Utils.stringRemoveTrailingSlashCharacters(Z.skinPath);(new Z.NetConnector).loadXML(Z.skinPath+"/"+Z.Utils.getResource("z200"));var ha,Q,A,X,ga=[],r=[],H=[],ca=parseInt(Z.Utils.getResource("z205"),
10),M=!1,N=null,C=null,O=null,da=null,xa,S,L,B,J;this.getInitialized=function(){return G};this.getSkinArray=function(){return ga};this.getSkinSizes=function(){return H};this.show=function(a){c(a)};this.setVisibility=function(a){d(a)};this.minimize=function(a){e(a)};this.showProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="inline-block")};this.hideProgress=function(){var a=document.getElementById("progressTextBox");a&&(a=a.style)&&(a.display="none")};
this.updateProgress=function(a,c){if(Z.progressVisible){O&&window.clearInterval(O);var d,e=document.getElementById("progressTextBoxCenteredDiv");e&&(e=e.firstChild)&&(0==a||0==c?(e.nodeValue="llllllllll",O=window.setInterval(b,parseInt(Z.Utils.getResource("z182")),10)):(d=Math.round(100-c/a*100),d=Math.round(d/10),e.nodeValue=Z.Utils.stringMultiply("l",d)))}};this.setViewport=function(b){a=b;R=a.getViewportID().toString()};this.parseSkinXML=function(b){Z.skinMode=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("SKINMODE").nodeValue;
var d,e;1==Z.skinMode||0==Z.skinMode&&!Z.mobileDevice?(d=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERSTANDARD").nodeValue,e="SIZESSTANDARD"):(d=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("FOLDERLARGE").nodeValue,e="SIZESLARGE");var f=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR");"undefined"!==typeof f&&null!==f&&(da=b.getElementsByTagName("SETUP")[0].attributes.getNamedItem("PROGRESSCOLOR").nodeValue);f=[];f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("TOOLBARW").nodeValue);
f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("TOOLBARH").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("LOGOW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("LOGOH").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("DIVIDERW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("DIVIDERH").nodeValue);f[f.length]=
parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONH").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("BUTTONSPAN").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERBUTTONW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERBUTTONH").nodeValue);f[f.length]=
parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERTRACKW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERTRACKH").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("SLIDERSPAN").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSW").nodeValue);f[f.length]=parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSH").nodeValue);f[f.length]=
parseFloat(b.getElementsByTagName(e)[0].attributes.getNamedItem("PROGRESSFONTSIZE").nodeValue);var m,x,A;e="edit"==Z.editMode?161:"markup"==Z.editMode?152:Z.imageFiltersVisible?100:Z.screensaver||Z.tourPath||Z.slidePath||Z.slidestackPath?77:Z.rotationVisible?58:Z.measureVisible?51:0<Z.helpVisible?45:Z.fullScreenVisible||Z.fullPageVisible?45:Z.resetVisible?35:Z.panButtonsVisible?32:Z.sliderVisible?19:Z.minimizeVisible?14:Z.logoVisible?8:6;m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN0");
null!==m&&(x=m.nodeValue);m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+e.toString());null!==m&&(A=m.nodeValue);if("undefined"!==typeof x&&Z.Utils.stringValidate(x)&&"undefined"!==typeof A&&Z.Utils.stringValidate(A)){x=!1;A=0;for(e+=1;A<e;A++)m=b.getElementsByTagName("FILES")[0].attributes.getNamedItem("SKIN"+A).nodeValue,Z.Utils.stringValidate(m)?r[A]=d+"/"+m:(r[A]="null",x=!0);x&&Z.Utils.showMessage(Z.Utils.getResource("z279"));ga=r;Z.ToolbarDisplay=Z.Utils.createContainerElement("div",
"ToolbarDisplay","inline-block","absolute","visible","1px","1px","0px","1px","none","0px","transparent none","0px","0px","normal");Q=Z.ToolbarDisplay.style;b=parseInt(Z.Utils.getResource("z230"),10);Q.zIndex=(b+1).toString();b=new Z.Utils.Graphic("toolbarBackground",Z.skinPath,r[0],"1px","1px","0px","0px");parseFloat(Z.Utils.getResource("z82"));Z.Utils.getResource("z83NOALPHA");Z.ToolbarDisplay.appendChild(b.elmt);H=f;Z.logoVisible&&(Z.Utils.stringValidate(Z.logoCustomPath)?(f=Z.Utils.cacheProofPath(Z.logoCustomPath),
f=new Z.Utils.Graphic("toolbarLogo",f,null,"1px","1px","1px","1px")):f=new Z.Utils.Graphic("toolbarLogo",Z.skinPath,r[7],"1px","1px","1px","1px"),Z.Utils.stringValidate(Z.logoLinkURL)?(b=document.createElement("a"),b.setAttribute("href",Z.logoLinkURL),b.setAttribute("target",Z.Utils.getResource("z427TARGET")),b.setAttribute("title",Z.Utils.getResource("z360")),b.setAttribute("outline","none"),b.appendChild(f.elmt),Z.ToolbarDisplay.appendChild(b)):(f.elmt.setAttribute("title",Z.Utils.getResource("z427DISPLAY")),
Z.ToolbarDisplay.appendChild(f.elmt)),0==Z.toolbarVisible||1==Z.toolbarVisible)&&(f=new Z.Utils.Graphic("logoDivider",Z.skinPath,r[8],"1px","1px","1px","1px"),Z.ToolbarDisplay.appendChild(f.elmt));f=Z.Utils.createContainerElement("div","buttonContainer","inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal","default");Z.ToolbarDisplay.appendChild(f);Z.Utils.addEventListener(f,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(f,"mouseover",
y.backgroundEventsHandler);Z.Utils.addEventListener(f,"touchstart",Z.Utils.preventDefault);b=new Z.Utils.Graphic("buttonBackground",Z.skinPath,r[0],"1px","1px","0px","0px");f.appendChild(b.elmt);Z.Utils.setOpacity(b.elmt,"0","#FBFAFA");(0!=Z.toolbarVisible&&1!=Z.toolbarVisible||Z.mobileDevice)&&Z.minimizeVisible&&(b=new Z.Utils.Button("buttonMinimize",null,Z.skinPath,r[9],r[10],r[11],"1px","1px","1px","1px","mouseover",l,"z363"),Z.ToolbarDisplay.appendChild(b.elmt),b=new Z.Utils.Button("buttonExpand",
null,Z.skinPath,r[12],r[13],r[14],"1px","1px","1px","1px","mouseover",l,"z341"),Z.ToolbarDisplay.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomOut",null,Z.skinPath,r[1],r[2],r[3],"1px","1px","1px","1px","mouseover",l,"z400");f.appendChild(b.elmt);Z.sliderVisible&&(b=new Z.Utils.Graphic("trackSlider",Z.skinPath,r[15],"1px","1px","0px","0px","z385"),f.appendChild(b.elmt),Z.Utils.addEventListener(b.elmt,"mousedown",l),Z.Utils.addEventListener(b.elmt,"touchstart",l),b=new Z.Utils.Button("buttonSlider",
null,Z.skinPath,r[17],r[18],r[19],"1px","1px","1px","1px","mouseover",l,"z385"),f.appendChild(b.elmt));b=new Z.Utils.Button("buttonZoomIn",null,Z.skinPath,r[4],r[5],r[6],"1px","1px","1px","1px","mouseover",l,"z399");f.appendChild(b.elmt);Z.panButtonsVisible&&(b=new Z.Utils.Graphic("panDivider",Z.skinPath,r[20],"1px","1px","1px","1px"),f.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanLeft",null,Z.skinPath,r[21],r[22],r[23],"1px","1px","1px","1px","mouseover",l,"z370"),f.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanUp",
null,Z.skinPath,r[24],r[25],r[26],"1px","1px","1px","1px","mouseover",l,"z372"),f.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanDown",null,Z.skinPath,r[27],r[28],r[29],"1px","1px","1px","1px","mouseover",l,"z369"),f.appendChild(b.elmt),b=new Z.Utils.Button("buttonPanRight",null,Z.skinPath,r[30],r[31],r[32],"1px","1px","1px","1px","mouseover",l,"z371"),f.appendChild(b.elmt));Z.resetVisible&&(b=new Z.Utils.Button("buttonReset",null,Z.skinPath,r[33],r[34],r[35],"1px","1px","1px","1px","mouseover",
l,"z378"),f.appendChild(b.elmt));if(Z.fullScreenVisible||Z.fullPageVisible)null===Z.editMode&&(b=new Z.Utils.Graphic("fullViewDivider",Z.skinPath,r[36],"1px","1px","1px","1px"),f.appendChild(b.elmt)),b=new Z.Utils.Button("buttonFullViewExit",null,Z.skinPath,r[40],r[41],r[42],"1px","1px","1px","1px","mouseover",l,"z391EXIT"),f.appendChild(b.elmt),b=new Z.Utils.Button("buttonFullView",null,Z.skinPath,r[37],r[38],r[39],"1px","1px","1px","1px","mouseover",l,"z391"),f.appendChild(b.elmt);if(1==Z.helpVisible||
3==Z.helpVisible)b=new Z.Utils.Button("buttonHelp",null,Z.skinPath,r[43],r[44],r[45],"1px","1px","1px","1px","mouseover",l,"z342"),f.appendChild(b.elmt);Z.progressVisible&&(b=Z.Utils.createContainerElement("div","progressTextBox","inline-block","absolute","hidden","1px","1px","1px","1px","none","0px","transparent none","0px","0px","normal",null,!0),d=H[16],f.appendChild(b),f=document.createTextNode(Z.Utils.getResource("z183")),b.appendChild(Z.Utils.createCenteredElement(f,"progressTextBoxCenteredDiv")),
null===da&&(da=Z.Utils.getResource("z183COLOR")),Z.Utils.setTextNodeStyle(f,da,"verdana",d+"px","none","normal","normal","normal","normal","1em","left","none"),Z.Utils.disableTextInteraction(f));Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);Z.toolbarW=H[0];Z.toolbarCurrentW=-1==Z.toolbarW?Z.viewerW:Z.toolbarW;Z.toolbarH=ha=H[1];y.setSizeAndPosition(Z.toolbarCurrentW,Z.toolbarH,0,1==Z.toolbarPosition?Z.viewerH-ha:0);a&&a.getInitialized()&&(1==Z.toolbarVisible&&(f=Z.Utils.getElementStyle(Z.pageContainer),
f=parseFloat(f.height),isNaN(f)&&(f=Z.ViewerDisplay.clientHeight),a.setSizeAndPosition(Z.viewerW,f-Z.toolbarH,0,0),a.validateXYZDefaults(!0),a.setView(Z.initialX,Z.initialY,Z.initialZ)),f=a.getZoom(),h(f));c(1==Z.toolbarVisible||2==Z.toolbarVisible||4==Z.toolbarVisible||7==Z.toolbarVisible);Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);G=!0;Z.Utils.validateCallback("toolbarInitialized");Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&
Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized")}else Z.Utils.showMessage(Z.Utils.getResource("z278"))};this.setSizeAndPosition=function(a,b,c,d){"undefined"===typeof a||null===a?a=0<Z.toolbarVisible?Z.toolbarCurrentW:0:Z.toolbarCurrentW=a;if("undefined"===typeof b||null===b)b=0<Z.toolbarVisible?ha:0;if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof d||null===d)d=1==Z.toolbarPosition?Z.viewerH-ha:0;Q=Z.ToolbarDisplay.style;Q.width=a+"px";Q.height=
b+"px";Q.left=c+"px";Q.top=d+"px";var e=H[2],f=H[3],h=H[4],m=H[5],l=H[6],k=H[7],x=H[8],t=H[9],y=H[10],G=H[11],r=H[12],R=H[13];c=H[14];d=H[15];var v=0,n=(b-f)/2+1,s=(b-m)/2,w=(b-k)/2,C=1.3*w,M=w+4,O=w+2,N=1==Z.logoVisible?0:x/2,ca=1==Z.logoVisible?0:x/2,ga=x-(l-h),U=2,D=0;Z.panButtonsVisible&&(U+=4,D+=1);Z.resetVisible&&(U+=1);if(Z.fullScreenVisible||Z.fullPageVisible)U+=1,D+=1;Z.helpVisible&&(U+=1,Z.fullScreenVisible||Z.fullPageVisible||(D+=1));D=U*x+D*ga;Z.sliderVisible&&(D+=R);xa=S=L=B=!1;var U=
(1==Z.logoVisible?e+2:0)+(0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&0!=Z.minimizeVisible?x:0),da=1==Z.panButtonsVisible?4*x+ga:0,lb=1==Z.resetVisible?x:0,F=U+20+D+20+c;F>a&&(xa=!0,F-R>a&&(S=!0,F-R-c>a&&(L=!0,F-R-c-U>a&&(J=!0,F-R-c-U-lb>a&&(B=!0,D-=da),D-=lb)),c=0),D-=R);da=(a-D)/2-20+3;if(U=document.getElementById("toolbarBackground"))U.style.width=a+"px",U.style.height=b+"px",U.firstChild.style.width=a+"px",U.firstChild.style.height=b+"px";if(U=document.getElementById("buttonContainer"))U.style.width=
D+40+"px",U.style.height=b+"px",U.style.left=da+"px";if(D=document.getElementById("buttonBackground"))D.style.width=a+"px",Z.Utils.graphicSize(D,parseFloat(U.style.width),parseFloat(U.style.height)),D.style.left="0px";if(D=document.getElementById("toolbarLogo"))if(da=D.style)if(L)da.display="none";else if(da.display="inline-block",Z.Utils.graphicSize(D,e,f),da.left=v+"px",da.top=n+"px",v+=e+2,e=document.getElementById("logoDivider"))Z.Utils.graphicSize(e,h,m),e=e.style,e.left=v+"px",e.top=s+"px";
0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&(e=document.getElementById("buttonMinimize"),f=document.getElementById("buttonExpand"),e&&f&&(n=e.style,D=f.style,n&&D&&(L?(n.display="none",D.display="none"):(n.display="inline-block",D.display="inline-block",Z.Utils.buttonSize(e,l,k),Z.Utils.buttonSize(f,l,k),n.left=v+N+"px",n.top=C+"px",D.left=v+ca+"px",D.top=C+"px"))));v=20;if(C=document.getElementById("buttonZoomOut"))Z.Utils.buttonSize(C,l,k),C=C.style,C.left=v+"px",C.top=w+"px",v+=x;A=document.getElementById("trackSlider");
X=document.getElementById("buttonSlider");A&&X&&(C=A.style,N=X.style,C&&N&&(xa?(C.display="none",N.display="none"):(C.display="inline-block",N.display="inline-block",Z.Utils.graphicSize(A,G,r),C.left=v-2+"px",C.top=M+"px",Z.Utils.buttonSize(X,t,y),N.left=parseFloat(C.left)+"px",N.top=O+"px",v+=R)));if(t=document.getElementById("buttonZoomIn"))Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x+1;if(!B&&(t=document.getElementById("panDivider"))){Z.Utils.graphicSize(t,h,m);t=t.style;
t.left=v+"px";t.top=s+"px";v+=ga;if(t=document.getElementById("buttonPanLeft"))Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x;if(t=document.getElementById("buttonPanUp"))Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x;if(t=document.getElementById("buttonPanDown"))Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x;if(t=document.getElementById("buttonPanRight"))Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x}!J&&(t=document.getElementById("buttonReset"))&&
(Z.Utils.buttonSize(t,l,k),t=t.style,t.left=v+"px",t.top=w+"px",v+=x+1);if(t=document.getElementById("fullViewDivider"))Z.Utils.graphicSize(t,h,m),h=t.style,h.left=v+"px",h.top=s+"px",v+=ga;if(s=document.getElementById("buttonFullViewExit"))Z.Utils.buttonSize(s,l,k),s=s.style,s.left=v+"px",s.top=w+"px",s.display=Z.fullView?"inline-block":"none";if(s=document.getElementById("buttonFullView"))Z.Utils.buttonSize(s,l,k),s=s.style,s.left=v+"px",s.top=w+"px",v+=x+1,s.display=Z.fullView?"none":"inline-block";
if(1==Z.helpVisible||3==Z.helpVisible)if(x=document.getElementById("buttonHelp"))Z.Utils.buttonSize(x,l,k),l=x.style,l.left=v+"px",l.top=w+"px";if(v=document.getElementById("progressTextBox"))if(v=v.style)S?v.display="none":(v.display="inline-block",v.width=c+"px",v.height=d+"px",v.left=a-parseFloat(U.style.left)-parseFloat(v.width)+"px",v.top=(b-parseFloat(v.height))/2+"px")};this.syncSliderToViewport=function(a){h(a)};this.z457=function(a){l(a)};this.backgroundEventsHandler=function(a){a=Z.Utils.event(a);
if(a=Z.Utils.relatedTarget(a)){var b=a.parentNode;b&&(b=b.id)&&(M||-1==b.indexOf("button")||-1!=b.indexOf("buttonContainer")||Z.Utils.setButtonDefaults(a.parentNode))}}};
Z.ZoomifyNavigator=function(a){function b(a,c){"ZoomifyImageFile"==Z.tileSource&&(E=c);var d=Z.Utils.createContainerElement("div","testImageContainer","inline-block","absolute","hidden",q+"px",Ma+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);d.appendChild(E);d.removeChild(E);d=null;d=E.height;if(0!=E.width&&0!=d){Z.NavigatorDisplay=Z.Utils.createContainerElement("div","NavigatorDisplay","inline-block","absolute","hidden",q+"px",Ma+"px",sb+"px",tb+"px","solid","1px",
"transparent none","0px","0px","normal",null,!0);C=Z.NavigatorDisplay;O=C.style;Z.slideshow&&Z.Utils.setOpacity(C,0);d=parseInt(Z.Utils.getResource("z230"),10);O.zIndex=(d+2).toString();var d=parseFloat(Z.Utils.getResource("z82")),e=Z.Utils.getResource("z83"),f=Z.Utils.getResource("z83NOALPHA"),e=Z.Utils.createContainerElement("div","navigatorBackground","inline-block","absolute","hidden",q+"px",Ma+"px","0px","0px","none","0px",e,"0px","0px","normal",null,!0);Z.Utils.setOpacity(e,d,f);Z.NavigatorDisplay.appendChild(e);
da=e;xa=da.style;d=Z.Utils.createContainerElement("div","navigatorImageContainer","inline-block","absolute","hidden",q+"px",Ma+"px","0px","0px","none","0px","transparent none","0px","0px","normal",null,!0);d.appendChild(E);E.alt=Z.Utils.getResource("z439");Z.NavigatorDisplay.appendChild(d);S=d;L=S.style;B=E;d=B.width;f=B.height;e=Z.Utils.createContainerElement("div","navigatorRectangle","inline-block","absolute","hidden",q+1+"px",Ma+1+"px",sb+"px",tb+"px","solid","1px","transparent none","0px","0px",
"normal",null,!0);e.style.borderColor=Z.Utils.stringValidateColorValue(Z.navigatorRectangleColor);Z.NavigatorDisplay.appendChild(e);J=e;g=J.style;Z.ViewerDisplay.appendChild(Z.NavigatorDisplay);h(q,Ma,sb,tb,rb,d,f);l(1==Z.navigatorVisible||2==Z.navigatorVisible);Z.Utils.addEventListener(C,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(C,"mousedown",R);Z.Utils.addEventListener(C,"touchstart",A);Z.Utils.addEventListener(C,"touchmove",X);Z.Utils.addEventListener(C,"touchend",ga);Z.Utils.addEventListener(C,
"touchcancel",r);ca=!0;Z.Utils.validateCallback("navigatorInitialized");Z.Viewport&&Z.Viewport.getInitialized()&&Z.Toolbar&&Z.Toolbar.getInitialized()&&Z.Navigator&&Z.Navigator.getInitialized()&&Z.Utils.validateCallback("viewerInitialized");s()}else window.setTimeout(function(){b(a,c)},100)}function c(b,d){var e="undefined"===typeof d||null===d?a:d;"ZoomifyImageFile"==Z.tileSource?ub=e.formatTilePath(0,0,0):"ZoomifyImageFolder"==Z.tileSource&&(ub=Z.Utils.cacheProofPath(e.getImagePath()+"/TileGroup0/0-0-0."+
Z.tileType));E=null;E=new Image;E.onload=b;E.onerror=G;"offsetLoading"!=ub?"ZoomifyImageFile"==Z.tileSource?(new Z.NetConnector).loadImage(ub,Z.Utils.createCallback(null,b),"navigator",null):E.src=ub:window.setTimeout(function(){c(b)},100)}function d(a){if(Z.NavigatorDisplay)if(Z.slideshow&&Z.Utils.setOpacity(Z.NavigatorDisplay,0),"ZoomifyImageFile"==Z.tileSource&&(E=a),S&&E&&0<E.width&&0<E.height){a=E.width;var b=E.height;S.appendChild(E);B=Z.NavigatorDisplay.childNodes[1].firstChild;h(q,Ma,sb,tb,
rb,a,b);a=Z.ToolbarDisplay&&"inline-block"==Z.ToolbarDisplay.style.display&&!Z.ToolbarMinimized||"undefined"!==typeof slideList&&null!==slideList&&"visible"==slideList.style.visibility;l((1==Z.navigatorVisible||2==Z.navigatorVisible)&&a);a=parseInt(Z.Utils.getResource("z230"),10);Z.NavigatorDisplay.style.zIndex=(a+2).toString();s()}else window.setTimeout(function(){d()},100)}function e(){ca&&(N&&(window.clearInterval(N),N=null),C&&O&&da&&xa&&S&&L&&B&&J&&g||(C=Z.NavigatorDisplay,O=C.style,da=Z.NavigatorDisplay.firstChild,
xa=da.style,S=Z.NavigatorDisplay.childNodes[1],L=S.style,B=Z.NavigatorDisplay.childNodes[1].firstChild,J=Z.NavigatorDisplay.childNodes[2],g=J.style))}function h(a,b,c,d,e,g,h){e||(e=rb);if("undefined"===typeof a||null===a)a=Z.navigatorW;if("undefined"===typeof b||null===b)b=Z.navigatorH;if("undefined"===typeof c||null===c)c=0;if("undefined"===typeof d||null===d)d=0;C||(C=Z.NavigatorDisplay);O||(O=C.style);B=C.childNodes[1].firstChild;0==B.width&&"undefined"!==g&&null!==g&&(B.width=g);0==B.height&&
"undefined"!==h&&null!==h&&(B.height=h);C&&O&&B&&(e&&(a=1,a=0==e?Z.viewerW/Z.viewerH:B.width/B.height,a*=b),O.width=a+"px",O.height=b+"px",O.left=c+"px",O.top=d+"px",f(a,b))}function f(a,b){B||(B=Z.NavigatorDisplay.childNodes[1].firstChild);B&&0!=B.width&&0!=B.height?(xa||(xa=Z.NavigatorDisplay.firstChild.style),L||(L=Z.NavigatorDisplay.childNodes[1].style),xa&&L&&(xa.width=a+"px",xa.height=b+"px",m(a,b),L.width=B.width+"px",L.height=B.height+"px",L.left=(a-B.width)/2+"px",L.top=(b-B.height)/2+"px",
s())):window.setTimeout(function(){f(a,b)},100)}function m(a,b){B||(B=Z.NavigatorDisplay.childNodes[1].firstChild);if(B){var c=B.width,d=B.height,e=c/d,f=a/c,g=b/d;f<=g?(c=a,d=a/e,navImageT=(b-a/c*d)/2):g<f&&(d=b,c=b*e,navImageL=(a-b/d*c)/2);B.width=c;B.height=d}}function l(a){O||(O=Z.NavigatorDisplay.style);O&&(O.display=a?"inline-block":"none")}function s(){if(a&&a.getInitialized()){w();var b=a.calculateCurrentCenterCoordinates();x(b)}}function w(){if(B&&g){var b=B.width/Z.imageW,c=B.height/Z.imageH,
d=a.getZoom(),c=Z.viewerH*c/d;g.width=Z.viewerW*b/d+"px";g.height=c+"px"}}function x(a){if(B&&g&&L){if("undefined"===typeof a||null===a||0==a.x&&0==a.y)a=new Z.Utils.Point(Z.imageX,Z.imageY);if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(B.width),d=parseFloat(B.height),b=Z.Utils.rotatePoint(c/Z.imageW*a.x-c/2,d/Z.imageH*a.y-d/2,-b);a=b.x-parseFloat(g.width)/2;c=b.y-parseFloat(g.height)/2;b=parseFloat(O.width)/2;c=parseFloat(O.height)/2+c-1;g.left=b+a+
"px";g.top=c+"px"}}function y(){if(B&&g&&L){if("undefined"===typeof z||null===z)z=Z.imageZ;var b=Z.imageR;0>b&&(b+=360);var c=parseFloat(g.left),d=parseFloat(g.top),e=parseFloat(O.width)/2,f=parseFloat(O.height)/2,d=d-f,c=c-e+parseFloat(g.width)/2,e=d+parseFloat(g.height)/2,b=Z.Utils.rotatePoint(c,e,b),c=parseFloat(B.width),e=parseFloat(B.height),d=c/Z.imageW,b=new Z.Utils.Point((b.x+c/2)/d,(b.y+e/2)/d);a.syncViewportToNavigator(b)}}function G(){Z.Utils.showMessage(Z.Utils.getResource("z271"))}function R(b){Z.interactivityOff||
(a.zoomAndPanAllStop(!1,!0),Z.maskingSelection&&Z.maskClearOnUserAction&&a.clearMask(),C&&J&&g&&(b=Z.Utils.event(b),J.mouseXPrior=b.clientX,J.mouseYPrior=b.clientY,dragPtStart=new Z.Utils.Point(b.clientX,b.clientY),Z.Utils.addEventListener(C,"mousemove",ha),Z.Utils.addEventListener(C,"mouseup",Q),Z.Utils.addEventListener(document,"mouseup",Q)))}function ha(a){if(!Z.interactivityOff&&J&&g){var b=parseFloat(g.left),c=parseFloat(g.top);g.left=b+(a.clientX-J.mouseXPrior)+"px";g.top=c+(a.clientY-J.mouseYPrior)+
"px";J.mouseXPrior=a.clientX;J.mouseYPrior=a.clientY;y();return!1}}function Q(b){if(!Z.interactivityOff&&C&&J&&g){document.mousemove=null;document.mouseup=null;Z.Utils.removeEventListener(C,"mousemove",ha);Z.Utils.removeEventListener(C,"mouseup",Q);Z.Utils.removeEventListener(document,"mouseup",Q);b=Z.Utils.event(b);var c=new Z.Utils.Point(b.clientX,b.clientY);4>Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),g.left=b.clientX-
c.x-parseFloat(g.width)/2+"px",g.top=b.clientY-c.y-parseFloat(g.height)/2+"px");y();a.updateView()}}function A(a){!Z.interactivityOff&&(a.preventDefault(),C&&J&&g&&(a=Z.Utils.getFirstTouch(a)))&&(a=new Z.Utils.Point(a.pageX,a.pageY),dragPtStart=new Z.Utils.Point(a.x,a.y),J.mouseXPrior=a.x,J.mouseYPrior=a.y)}function X(a){if(!Z.interactivityOff&&(a.preventDefault(),Z.mousePan)){if(J&&g&&(a=Z.Utils.getFirstTouch(a))){a=new Z.Utils.Point(a.pageX,a.pageY);var b=parseFloat(g.left),c=parseFloat(g.top);
g.left=b+(a.x-J.mouseXPrior)+"px";g.top=c+(a.y-J.mouseYPrior)+"px";J.mouseXPrior=a.x;J.mouseYPrior=a.y;y()}return!1}}function ga(b){if(!Z.interactivityOff&&C&&J&&g){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),g.left=b.x-c.x-parseFloat(g.width)/2+"px",g.top=b.y-c.y-parseFloat(g.height)/2+"px")}y();a.updateView()}}
function r(b){if(!Z.interactivityOff&&C&&J&&g){if(b=Z.Utils.getFirstTouch(b)){b=new Z.Utils.Point(b.pageX,b.pageY);var c=new Z.Utils.Point(b.x,b.y);Z.Utils.calculatePointsDistance(dragPtStart.x,dragPtStart.y,c.x,c.y)<(Z.mobileDevice?6:3)&&(c=Z.Utils.getElementPosition(Z.NavigatorDisplay),g.left=b.x-c.x-parseFloat(g.width)/2+"px",g.top=b.y-c.y-parseFloat(g.height)/2+"px")}y();a.updateView()}}var H=this,ca=!1,M=a.getViewportID().toString(),N,C,O,da,xa,S,L,B,J,g,E,ka=[],q=Z.navigatorW,Ma=Z.navigatorH,
sb=Z.navigatorL,tb=Z.navigatorT,rb=Z.navigatorFit,ub;c(b);this.z556=function(a,c){b(a,c)};this.setImage=function(a){S&&E&&0<S.childNodes.length&&(S.innerHTML="");"undefined"===typeof ka||null===ka||0==ka.length?c(d):(a=Z.Utils.arrayIndexOfObjectValue(ka,"id",M),-1!=a&&(E=ka[a].image,d(E)))};this.getInitialized=function(){return ca};this.setVisibility=function(a){l(a)};this.syncToViewport=function(){s()};this.z657=function(){w()};this.z658=function(a){x(a)};this.setViewport=function(b){a=b;M=a.getViewportID().toString();
H.setImage(a.getImagePath())};this.z682=function(){ca?e():N=window.setInterval(e,300)};this.setSizeAndPosition=function(a,b,c,d,e,f,g){h(a,b,c,d,e,f,g)}};
Z.NetConnector=function(){function a(a,d,e,f,h,m){var l=b();if(l){var s="function"===typeof d;if(s){var w=d;d=function(){window.setTimeout(Z.Utils.createCallback(null,w,l),1)};l.onreadystatechange=function(){4==l.readyState&&(l.onreadystatechange=new Function,d())}}try{"undefined"===typeof e||null===e?(l.open("GET",a,s),l.send(null)):"undefined"!==typeof f&&null!==f&&"ZoomifyImageFile"==Z.tileSource&&("tile"!=f&&(a=Z.Utils.cacheProofPath(a)),l.open("GET",a,!0),l.responseType="arraybuffer",Z.Utils.defineObjectProperty(l,
"zType",{value:f,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(l,"zTile",{value:h,writable:!1,enumerable:!1,configurable:!1}),Z.Utils.defineObjectProperty(l,"zChunkNumber",{value:m,writable:!1,enumerable:!1,configurable:!1}),Z.browser==Z.browsers.SAFARI&&l.setRequestHeader("If-Modified-Since","Thu, 01 Dec 1994 16:00:00 GMT"),l.setRequestHeader("Range","bytes="+e.start.toString()+"-"+e.end.toString()),l.send(null))}catch(r){c(r,a,f),l.onreadystatechange=l=null}}else Z.Utils.showMessage(Z.Utils.getResource("z295"))}
function b(){var a=null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":a=new XMLHttpRequest;break;case "Msxml2.XMLHTTP.6.0":a=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":a=new ActiveXObject("Msxml2.XMLHTTP.3.0");break;case "Microsoft.XMLHTTP":a=new ActiveXObject("Microsoft.XMLHTTP")}return a}function c(a,b,c){1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=
Z.browserVersion)?Z.Utils.showMessage(Z.Utils.getResource("z288"),!0):1==Z.localUse&&"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z290"),!0):1==Z.localUse&&"ZoomifyPFFFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z289"),!0):-1!=b.toLowerCase().indexOf(".zif")?Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTERANGE")+c+".",!1,m,"center"):-1!=b.indexOf("ImageProperties.xml")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEXML"),!0,null,"left"):-1!=b.toLowerCase().indexOf(".pff")?
Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEHEADER"),!1,m,"center"):-1!=b.toLowerCase().indexOf("reply_data")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEOFFSET"),!1,m,"center"):-1!=b.indexOf(Z.Utils.getResource("z200"))?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):Z.Utils.showMessage(Z.Utils.getResource("z256"),!1,f,"center")}function d(a,b){if(a)if(200!==a.status&&0!==a.status&&206!==a.status){var c=a.status,d=404==c?"Not Found":a.statusText;Z.Toolbar&&
!Z.Toolbar.getInitialized()?Z.Utils.showMessage(Z.Utils.getResource("z256-TOOLBARSKINSXML"),!0,null,"left"):"ZoomifyImageFile"==Z.tileSource?Z.Utils.showMessage(Z.Utils.getResource("z273RANGEREQUESTS")+c+" - "+d,!0,null,"left"):Z.Utils.showMessage(Z.Utils.getResource("z273")+c+" - "+d,!1,f,"center")}else c=null,a.response&&a.zType&&"ZoomifyImageFile"==Z.tileSource?Z.Viewport&&(c=new Z.Utils.createUint8Array(a.response,0),"header"==a.zType?"undefined"!==typeof b&&null!==b||Z.Viewport.parseZIFHeader(c):
"offset"==a.zType?"undefined"!==typeof b&&null!==b||Z.Viewport.parseZIFOffsetChunk(c,a.zChunkNumber):"byteCount"==a.zType?"undefined"!==typeof b&&null!==b||Z.Viewport.parseZIFByteCountChunk(c,a.zChunkNumber):"image"==a.zType.substring(0,5)?(l--,Z.Viewport.parseZIFImage(c,a.zTile,a.zType)):"navigator"==a.zType?"undefined"!==typeof b&&null!==b||Z.viewportCurrent.parseZIFImage(c,a.zTile,a.zType):Z.Utils.showMessage(Z.Utils.getResource("z256-ZIFBYTES"),!1,m,"center")):a.responseXML&&a.responseXML.documentElement&&
((c=a.responseXML)&&c.documentElement?(d=c.documentElement.tagName,"COPYRIGHT"==d?(d=c.documentElement.getAttribute("STATEMENTTEXT"),c=c.documentElement.getAttribute("DECLINEDTEXT"),Z.Utils.stringValidate(d)?Z.Utils.showCopyright(d,c):Z.Utils.showMessage(Z.Utils.getResource("z255"),!0)):"IMAGE_PROPERTIES"==d||"ZIFHEADER"==d||"PFFHEADER"==d?("ZoomifyImageFile"==Z.tileSource||"ZoomifyImageFolder"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource||"ImageServer"==Z.tileSource)&&Z.Viewport&&Z.Viewport.z602(c):
"SKINDATA"==d?Z.Toolbar&&Z.Toolbar.parseSkinXML(c):"SLIDEDATA"==d?Z.Viewport&&Z.Viewport.parseSlidesXML(c):Z.Utils.showMessage(Z.Utils.getResource("z296"),!0)):Z.Utils.showMessage(Z.Utils.getResource("z293"),!0));else Z.Utils.showMessage(Z.Utils.getResource("z272"),!1,f,"center")}function e(a,b,c){l--;if("function"===typeof a)try{a(c)}catch(d){Z.Utils.showMessage(d.name+Z.Utils.getResource("z245")+b+" "+d.message,!0)}}function h(a,b,c){function d(c){e.onload=null;e.onabort=null;e.onerror=null;f&&
window.clearTimeout(f);window.setTimeout(function(){b(a,c?e:null)},1)}var e=null,f=null;this.start=function(){e=new Image;var b=function(){d(!1)};e.onload=function(){d(!0)};e.onabort=b;e.onerror=b;f=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));d(!1);Z.Viewport.validateView("imageRequestTimeout",c+" timeout: "+a)},w);e.src=a}}var f=parseInt(Z.Utils.getResource("z268"),10),m=parseInt(Z.Utils.getResource("z268MEDIUM"),10),l=0,s=parseInt(Z.Utils.getResource("z140"),10),w=parseFloat(Z.Utils.getResource("z139"));
this.loadXML=function(b,c){"undefined"===typeof c||null===c?a(b,d,null):a(b,function(a){d(a,c)},null)};this.loadJSON=function(b){a(b,d,null)};this.loadByteRange=function(b,c,e,f,h,l){c=new Z.Utils.Range(c,e);a(b,d,c,f,h,l)};this.loadImageByteRange=function(b,c,e){var f=b.substring(0,b.indexOf("?")),h=parseFloat(b.substring(b.indexOf("?")+1,b.indexOf(",")));b=parseFloat(b.substring(b.indexOf(",")+1,b.length));h=new Z.Utils.Range(h,h+b);a(f,d,h,c,e)};this.loadImage=function(a,b,c,d){return l<s?(l++,
"ZoomifyImageFile"==Z.tileSource&&("undefined"!==typeof d&&null!==d||"navigator"==c)?this.loadImageByteRange(a,c,d):(b=Z.Utils.createCallback(null,e,b),(new h(a,b,c)).start()),!0):!1}};
Z.Utils={addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(a){if(a){var b=a.parentNode.style;b&&(a.parentNode.unselectable="on",b.userSelect="none",b.MozUserSelect="none",b.webkitUserSelect="none",b.webkitTouchCallout="none",b.webkitTapHighlightColor="transparent")}},this.renderQuality=function(a,b){b&&a.style.setProperty("image-rendering","high"==b?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(a,b,c){Z.alphaSupported?a.style.opacity=
b:c&&(a.style.backgroundColor=c)}):document.attachEvent&&(this.disableTextInteraction=function(a){a&&(a.parentNode.unselectable="on",a.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(a,b){b&&(a.style.msInterpolationMode="high"==b?"bicubic":"nearest-neighbor")},this.setOpacity=function(a,b,c){Z.alphaSupported?(b*=100,a.style.zoom=1,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")",a.style.filter="alpha(opacity="+b+")",100==b&&(a.style.filter="")):c&&
(a.style.backgroundColor=c)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(a,b,c){a&&("mousewheel"==b&&a.addEventListener("DOMMouseScroll",c,!1),a.addEventListener(b,c,!1))},this.removeEventListener=function(a,b,c){a&&("mousewheel"==b&&a.removeEventListener("DOMMouseScroll",c,!1),a.removeEventListener(b,c,!1))},this.event=function(a){return a},this.target=function(a){return a.target},this.relatedTarget=function(a){return a.relatedTarget},this.isRightMouseButton=
function(a){var b=!1;if(2==a.which||3==a.which)b=!0;return b},this.preventDefault=function(a){a.preventDefault()},this.stopPropagation=function(a){a.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(a,b,c){if(-1==this._findListener(a,b,c)){var d=function(){var b=window.event;Function.prototype.call?c.call(a,b):(a._currentListener=c,a._currentListener(b),a._currentListener=null)};a.attachEvent("on"+b,d);b={target:a,eventName:b,handler:c,handler2:d};var d=(a.document||a).parentWindow,
e="l"+this._listenerCounter++;d._allListeners||(d._allListeners={});d._allListeners[e]=b;a._listeners||(a._listeners=[]);a._listeners[a._listeners.length]=e;d._unloadListenerAdded||(d._unloadListenerAdded=!0,d.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(a,b,c){if(a&&(c=this._findListener(a,b,c),-1!=c)){var d=(a.document||a).parentWindow,e=a._listeners[c];a.detachEvent("on"+b,d._allListeners[e].handler2);a._listeners=Z.Utils.arraySplice(a._listeners,c,1);delete d._allListeners[e]}},
this.event=function(a){return window.event},this.target=function(a){return a.srcElement},this.relatedTarget=function(a){var b=null;"mouseover"==a.type?b=a.fromElement:"mouseout"==a.type&&(b=a.toElement);return b},this.isRightMouseButton=function(a){var b=!1;2==a.button&&(b=!0);return b},this.preventDefault=function(a){a&&(a.returnValue=!1)},this.stopPropagation=function(a){a.cancelBubble=!0},this._findListener=function(a,b,c){var d=a._listeners;if(!d)return-1;a=(a.document||a).parentWindow;for(var e=
d.length-1;0<=e;e--){var h=a._allListeners[d[e]];if(h&&h.eventName==b&&h.handler==c)return e}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var a=this._allListeners[id];a.target.detachEvent("on"+a.eventName,a.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},declareGlobals:function(){Z.pageContainerID=null;Z.imagePath=null;Z.skinPath=null;Z.skinMode=null;Z.parameters=null;Z.cacheProofCounter=0;Z.browsers=null;Z.browser=null;Z.browserVersion=null;Z.scaleThreshold=
null;Z.canvasSupported=null;Z.cssTransformsSupported=null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.rotationSupported=null;Z.fullScreenSupported=null;Z.arrayMapSupported=null;Z.arraySpliceSupported=null;Z.float32ArraySupported=null;Z.uInt8ArraySupported=null;Z.xmlHttpRequestSupport=null;Z.definePropertySupported=null;Z.responseArraySupported=null;Z.responseArrayPrototyped=!1;Z.touchSupport=null;Z.mobileDevice=null;Z.localUse=null;Z.zifSupported=
null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.initialZoom=null;Z.minZ=null;Z.minZoom=null;Z.maxZ=null;Z.maxZoom=null;Z.zoomSpeed=null;Z.panSpeed=null;Z.smoothPan=null;Z.smoothPanEasing=null;Z.smoothPanGlide=null;Z.fadeInSpeed=null;Z.toolbarVisible=null;Z.toolbarAutoShowHide=null;Z.toolbarW=null;Z.toolbarH=null;Z.toolbarPosition=null;Z.navigatorVisible=null;Z.navigatorW=null;Z.navigatorWidth=null;Z.navigatorH=null;Z.navigatorHeight=null;Z.navigatorL=null;Z.navigatorLeft=null;Z.navigatorT=
null;Z.navigatorTop=null;Z.navigatorFit=null;Z.navigatorRectangleColor=null;Z.clickZoom=null;Z.doubleClickZoom=null;Z.doubleClickDelay=null;Z.clickPan=null;Z.clickZoomAndPanBlock=!1;Z.mousePan=null;Z.keys=null;Z.constrainPan=null;Z.constrainPanStrict=null;Z.tooltipsVisible=null;Z.helpVisible=0;Z.minimizeVisible=null;Z.sliderVisible=null;Z.panButtonsVisible=null;Z.resetVisible=null;Z.fullViewVisible=null;Z.fullScreenVisible=null;Z.fullPageVisible=null;Z.initialFullPage=null;Z.fullPageInitial=null;
Z.measureVisible=!1;Z.textColor=null;Z.lineColor=null;Z.backColor=null;Z.fillColor=null;Z.rotationVisible=null;Z.initialR=null;Z.initialRotation=null;Z.progressVisible=null;Z.logoVisible=null;Z.logoLink=null;Z.logoLinkURL=null;Z.logoCustomPath=null;Z.canvas=null;Z.debug=null;Z.imageProperties=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";Z.tilesPNG=null;Z.tileSource=null;Z.Viewer=null;Z.ViewerDisplay=null;Z.Viewport=null;Z.Toolbar=null;Z.ToolbarDisplay=null;Z.ToolbarMinimized=!1;Z.TooltipDisplay=
null;Z.Navigator=null;Z.NavigatorDisplay=null;Z.MessageDisplay=null;Z.messages=null;Z.messageDisplayList=[];Z.overlayMessage=null;Z.imageW=null;Z.imageH=null;Z.imageCenterX=null;Z.imageCenterY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.preventDupCall=!1;Z.fitZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.fullView=!1;Z.interactivityOff=!1;Z.useCanvas=!0;Z.specialStorageEnabled=null;Z.callbacks=[];Z.updateViewPercent=0;Z.mouseIsDown=
!1;Z.mouseOutDownPoint=null;Z.viewportCurrentID=0;Z.viewportCurrent=null},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5};var a=Z.browsers.UNKNOWN,b=0,c=1E4,d=navigator.appName,e=navigator.appVersion,h=!1,f=!1,m=navigator.userAgent.toLowerCase();if("Microsoft Internet Explorer"==d&&window.attachEvent&&window.ActiveXObject)b=m.indexOf("msie"),a=Z.browsers.IE,b=parseFloat(m.substring(b+5,m.indexOf(";",b))),h="undefined"!==typeof document.documentMode;
else if("Netscape"==d&&-1!=m.indexOf("trident"))a=Z.browsers.IE,b=11;else if("Netscape"==d&&window.addEventListener){var l=m.indexOf("firefox"),d=m.indexOf("safari"),e=m.indexOf("chrome");0<=l?(a=Z.browsers.FIREFOX,b=parseFloat(m.substring(l+8)),c=1E4):0<=d&&(c=m.substring(0,d).lastIndexOf("/"),a=0<=e?Z.browsers.CHROME:Z.browsers.SAFARI,b=parseFloat(m.substring(c+1,d)),c=1E4);d=new Image;d.style.getPropertyValue&&(f=d.style.getPropertyValue("image-rendering"))}else"Opera"==d&&window.opera&&"[object Opera]"==
Object.prototype.toString.call(window.opera)&&(a=Z.browsers.OPERA,b=parseFloat(e));var s;if(window.ActiveXObject)for(d=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0,l=d.length;e<l;e++)try{netReq=new ActiveXObject(d[e]);s=d[e];break}catch(w){}else window.XMLHttpRequest&&(netReq=new XMLHttpRequest,s="XMLHttpRequest");var d="response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in
XMLHttpRequest.prototype,e=document.createElement("canvas"),e=!(!e.getContext||!e.getContext("2d")),l=!(a==Z.browsers.SAFARI&&4>b||a==Z.browsers.CHROME&&2>b),e=e&&l,l=!(a==Z.browsers.CHROME&&2>b),f=h||f?"high":null,x=(document.documentElement||{}).style||{},h=!1,y=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],G,R;for(;G=y.shift();)if("undefined"!==typeof x[G]){h=!0;R=/webkit/i.test(G);break}x=h;y=!1;if("undefined"!==typeof document.cancelFullScreen||"undefined"!==typeof document.webkitCancelFullScreen||
"undefined"!==typeof document.mozCancelFullScreen||"undefined"!==typeof document.oCancelFullScreen||"undefined"!==typeof document.msCancelFullScreen||"undefined"!==typeof document.msExitFullscreen)y=!0;var ha=Array.prototype.map,Q=Array.prototype.splice,A=!1;try{new Float32Array(1),A=!0}catch(X){}var ga=!1;try{new Uint8Array(1),ga=!0}catch(r){}var H=!1;if("function"==typeof Object.defineProperty)try{Object.defineProperty({},"x",{}),H=!0}catch(ca){}var M="ontouchstart"in window||window.DocumentTouch&&
document instanceof DocumentTouch||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,m=-1<m.indexOf("android")||-1<m.indexOf("iphone")||-1<m.indexOf("ipad")||-1<m.indexOf("ipod"),N;switch(window.location.protocol){case "http:":N=!1;break;case "https:":N=!1;break;case "file:":N=!0;break;default:N=null}var C=!(Z.browser==Z.browsers.IE&&9>Z.browserVersion||Z.browser==Z.browsers.OPERA&&15>Z.browserVersion||Z.browser==Z.browsers.CHROME&&25>Z.browserVersion&&Z.browser==Z.browsers.FIREFOX&&20>Z.browserVersion&&
Z.browser==Z.browsers.SAFARI&&5>Z.browserVersion);Z.browser=a;Z.browserVersion=b;Z.scaleThreshold=c;Z.xmlHttpRequestSupport=s;Z.responseArraySupported=d;Z.canvasSupported=e;Z.useCanvas=Z.canvasSupported;Z.imageFiltersVisible=!Z.useCanvas&&Z.imageFiltersVisible?!1:Z.imageFiltersVisible;Z.cssTransformsSupported=h;Z.cssTransformProperty=G;Z.cssTransformNoUnits=R;Z.alphaSupported=l;Z.renderQuality=f;Z.rotationSupported=x;Z.fullScreenSupported=y;Z.arrayMapSupported=ha;Z.arraySpliceSupported=Q;Z.float32ArraySupported=
A;Z.uInt8ArraySupported=ga;Z.definePropertySupported=H;Z.touchSupport=M;Z.mobileDevice=m;Z.localUse=N;Z.zifSupported=C},parseParameters:function(a){var b=[];if("object"===typeof a)b=a;else if("string"===typeof a){a=a.split("&");for(var c=0,d=a.length;c<d;c++){var e=a[c],h=e.indexOf("=");if(0<h){var f=e.substring(0,h),e=e.substring(h+1);b[f]=e}}}return b},parametersToDelimitedString:function(a,b){var c="",d;for(d in a)c+=d+"="+a[d].toString()+b;return c=c.slice(0,-1)},setParameters:function(a){var b=
this.getResource("z287"),c=this.getResource("z110"),d=this.getResource("z109"),e=this.getResource("z108"),c=c!=d?!0:!1;c||(Z.logoLinkURL=Z.Utils.getResource("z427"));var h=this.getResource("z187"),f=this.getResource("z186"),d=this.getResource("z185"),h=h!=f?!0:!1,f=this.getResource("z215"),m=this.getResource("z214");this.getResource("z213");Z.specialStorageEnabled=f!=m?!0:!1;var m=this.getResource("z107"),l=this.getResource("z106"),f=this.getResource("z105"),m=m!=l?!0:!1;Z.skinPath=this.getResource("z201");
Z.skinMode=this.getResource("z199");isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));
isNaN(parseFloat(this.getResource("z241")))||(Z.zoomSpeed=parseFloat(this.getResource("z241")));isNaN(parseFloat(this.getResource("z175")))||(Z.panSpeed=parseFloat(this.getResource("z175")));isNaN(parseFloat(this.getResource("z111")))||(Z.fadeInSpeed=parseFloat(this.getResource("z111")));Z.navigatorVisible=parseInt(this.getResource("z171"),10);Z.navigatorW=parseInt(this.getResource("z172"),10);Z.navigatorH=parseInt(this.getResource("z167"),10);Z.navigatorL=parseInt(this.getResource("z168"),10);Z.navigatorT=
parseInt(this.getResource("z170"),10);Z.navigatorFit=this.getResource("z166");Z.navigatorRectangleColor=this.getResource("z169");Z.clickZoom="0"!=this.getResource("z93");Z.doubleClickZoom="0"!=this.getResource("DEFAULT_DOUBLECLICKZOOM");Z.doubleClickDelay=parseFloat(this.getResource("DEFAULT_DOUBLECLICKDELAY"));Z.clickPan="0"!=this.getResource("z92");Z.mousePan="0"!=this.getResource("z164");Z.constrainPan="0"!=this.getResource("z95");Z.constrainPanStrict="0"!=this.getResource("z95STRICT");Z.smoothPan=
Z.useCanvas&&"0"!=this.getResource("DEFAULT_SMOOTHPAN");Z.smoothPanEasing=parseInt(this.getResource("DEFAULT_SMOOTHPANEASING"),10);Z.smoothPanGlide=parseInt(this.getResource("DEFAULT_SMOOTHPANGLIDE"),10);Z.keys="0"!=this.getResource("z146");Z.canvas="0"!=this.getResource("z88");Z.debug=parseInt(this.getResource("z104"),10);Z.toolbarVisible=parseInt(this.getResource("z223"),10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;
Z.toolbarPosition=parseFloat(this.getResource("z222"));Z.logoVisible="0"!=this.getResource("z150");Z.logoCustomPath=this.getResource("z149");Z.minimizeVisible="0"!=this.getResource("z162");Z.sliderVisible="0"!=this.getResource("z206");Z.panButtonsVisible="0"!=this.getResource("z174");Z.resetVisible="0"!=this.getResource("DEFAULT_RESETVISIBLE");Z.tooltipsVisible="0"!=this.getResource("z224");Z.helpVisible=parseInt(this.getResource("z128"),10);Z.progressVisible="0"!=this.getResource("z184");Z.fullViewVisible=
"0"!=this.getResource("z121");Z.fullScreenVisible="0"!=this.getResource("z119");Z.fullPageVisible="0"!=this.getResource("z118");Z.initialFullPage="0"!=this.getResource("z141");Z.rotationVisible="0"!=this.getResource("z190");Z.initialR=this.getResource("DEFAULT_INITIALR");if("object"===typeof a&&null!==a)for(var s in a)if("function"!==typeof a[s]||"zOnAnnotationReady"===s||"zOnReady"===s)if("undefined"===typeof Z[Z.Utils.stringLowerCaseFirstLetter(s.substr(1))])alert(b+" "+s);else if(pValue=a[s],c||
"zNavigatorVisible"==s)switch(s){case "zInitialX":isNaN(parseFloat(pValue))||(Z.initialX=parseFloat(pValue));break;case "zInitialY":isNaN(parseFloat(pValue))||(Z.initialY=parseFloat(pValue));break;case "zInitialZoom":isNaN(parseFloat(pValue))||(Z.initialZ=parseFloat(pValue),Z.initialZ&&-1!=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":isNaN(parseFloat(pValue))||(Z.minZ=parseFloat(pValue),Z.minZ&&-1!=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(pValue))||(Z.maxZ=parseFloat(pValue),
Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100));break;case "zNavigatorVisible":Z.navigatorVisible=parseInt(pValue,10);break;case "zNavigatorRectangleColor":Z.navigatorRectangleColor=pValue;break;case "zToolbarVisible":Z.toolbarVisible=parseInt(pValue,10);Z.toolbarAutoShowHide=0!=Z.toolbarVisible&&1!=Z.toolbarVisible&&6!=Z.toolbarVisible&&7!=Z.toolbarVisible&&8!=Z.toolbarVisible;break;case "zLogoVisible":"0"==pValue&&(Z.logoVisible=!1);break;case "zMinimizeVisible":"0"==pValue&&(Z.minimizeVisible=!1);break;case "zSliderVisible":"0"==
pValue&&(Z.sliderVisible=!1);break;case "zPanButtonsVisible":"0"==pValue&&(Z.panButtonsVisible=!1);break;case "zResetVisible":"0"==pValue&&(Z.resetVisible=!1);break;case "zFullViewVisible":"1"==pValue?(Z.fullScreenVisible=!0,Z.fullPageVisible=!1):"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullScreenVisible":"0"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!1);break;case "zFullPageVisible":"1"==pValue&&(Z.fullScreenVisible=!1,Z.fullPageVisible=!0);break;case "zInitialFullPage":"1"==
pValue&&(Z.initialFullPage=!0);break;case "zFullPageInitial":alert(Z.Utils.getResource("z275")+" zFullPageInitial is now zInitialFullPage");break;case "zSkinPath":Z.skinPath=pValue;break;case "zTooltipsVisible":"0"==pValue&&(Z.tooltipsVisible=!1);break;case "zHelpVisible":Z.helpVisible=parseInt(pValue,10);break;case "zProgressVisible":"0"==pValue&&(Z.progressVisible=!1);break;default:h||alert(d+" "+s)}else alert(e+" "+s);if(Z.Utils.stringValidate(Z.annotationPath)||Z.Utils.stringValidate(Z.saveHandlerPath))m||
alert(f);Z.Utils.validateImagePath()},resetParametersXYZ:function(a){isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));
if(this.stringValidate(a))for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d.indexOf("=");if(0<e){var h=d.substring(0,e),d=d.substring(e+1);if(this.stringValidate(d))switch(h){case "zInitialX":isNaN(parseFloat(d))||(Z.initialX=parseFloat(d));break;case "zInitialY":isNaN(parseFloat(d))||(Z.initialY=parseFloat(d));break;case "zInitialZoom":isNaN(parseFloat(d))||(Z.initialZ=parseFloat(d),Z.initialZ&&-1!=Z.initialZ&&(Z.initialZ/=100));break;case "zMinZoom":isNaN(parseFloat(d))||(Z.minZ=parseFloat(d),Z.minZ&&
-1!=Z.minZ&&(Z.minZ/=100));break;case "zMaxZoom":isNaN(parseFloat(d))||(Z.maxZ=parseFloat(d),Z.maxZ&&-1!=Z.maxZ&&(Z.maxZ/=100))}}}},validateImagePath:function(a){a="undefined"!==typeof a&&Z.Utils.stringValidate(a)?a:Z.imagePath;if(null!==a){var b=this.getResource("z213");-1!=a.toLowerCase().indexOf(".zif")?Z.zifSupported?(Z.tileSource="ZoomifyImageFile",Z.Utils.validateResponseArrayFunctionality()):alert(this.getResource("z16")):Z.Utils.stringValidate(Z.tileHandlerPath)?-1!=a.toLowerCase().indexOf(".pff")?
Z.specialStorageEnabled?(Z.tileSource="ZoomifyPFFFile",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(b):Z.Utils.stringValidate(Z.tileHandlerPath)&&(Z.specialStorageEnabled?(Z.tileSource="ImageServer",a=Z.tileHandlerPath,Z.tileHandlerPathFull=a):alert(b)):Z.tileSource="ZoomifyImageFolder"}},getResource:function(a){var b="";switch(a){case "z110":b="Enable Express parameters";break;case "z109":b="Changing This Violates License Agreement";break;case "z108":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Express, Pro, and Enterprise editions: ";
break;case "z187":b="Changing This Violates License Agreement";break;case "z186":b="Changing This Violates License Agreement";break;case "z185":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Pro and Enterprise editions: ";break;case "z215":b="Changing this violates License Agreement";break;case "z214":b="Changing this violates License Agreement";break;case "z213":b="Support for Zoomify Image File (PFF) storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition.";
break;case "z107":b="Changing this violates License Agreement";break;case "z106":b="Changing this violates License Agreement";break;case "z105":b="Support for this parameter is enabled only in the Zoomify Image Viewer included in the Zoomify HTML5 Enterprise edition: ";break;case "z125":b="0";break;case "z124":b="8192";break;case "z90":b="ZoomifyImageFile"==Z.tileSource?"1024":"256";break;case "z221":b="256";break;case "z219":b="256";break;case "z140":b="300";break;case "z139":b="60000";break;case "z218":b=
"1.15";break;case "z220":b="300";break;case "z81":b="6";break;case "z78":b="3";break;case "z80":b="5";break;case "z77":b="3";break;case "z79":b="3";break;case "z76":b="2";break;case "z75":b="0";break;case "z173":b=Z.mobileDevice?"1":"1.5";Z.rotationVisible&&(b="2");break;case "z74":b=Z.mobileDevice?"1":"2";break;case "z88":b="1";break;case "z230":b="2000";break;case "DEFAULT_VALIDATEVIEWRETRYLIMIT":b="2";break;case "DEFAULT_VALIDATEVIEWRETRYDELAY":b="1000";break;case "z104":b="0";break;case "z175":b=
"5";break;case "z176":b="10";break;case "z241":b="5";break;case "z242":b="0.02";break;case "z238":b="30";break;case "z240":b="20";break;case "z239":b="800";break;case "z93TIERSKIPTHRESHOLD":b="0.2";break;case "z122":b="10";break;case "z165":b="300";break;case "z111":b="5";break;case "z112":b="0.067";break;case "z146":b="1";break;case "z164":b="1";break;case "z92":b="1";break;case "z93":b="1";break;case "DEFAULT_DOUBLECLICKZOOM":b="1";break;case "DEFAULT_DOUBLECLICKDELAY":b="250";break;case "z95":b=
"1";break;case "z95STRICT":b="0";break;case "DEFAULT_SMOOTHPAN":b="1";break;case "DEFAULT_SMOOTHPANEASING":b="2";break;case "DEFAULT_SMOOTHPANGLIDE":b="2";break;case "z143":b=null;break;case "z144":b=null;break;case "z145":b=null;break;case "z163":b=null;break;case "z153":b="1";break;case "z83":b="#FBFAFA";break;case "z83NOALPHA":b="#FBFAFA";break;case "z83LIGHT":b="#FEFEFE";break;case "z82":b="0.75";break;case "z86":b="0.75";break;case "z87":b="#C0C0C0";break;case "z200":b="skinFiles.xml";break;
case "z201":b="Assets/Skins/Default";break;case "z199":b="0";break;case "z171":b="2";break;case "z172":b="150";break;case "z167":b="100";break;case "z168":b="-1";break;case "z170":b="-1";break;case "z166":b=null;break;case "z169":b="#0000FF";break;case "z223":b="4";break;case "z222":b="1";break;case "z224":b="1";break;case "z128":b="1";break;case "z150":b="1";break;case "z149":b=null;break;case "z162":b="1";break;case "z206":b="1";break;case "z205":b="10";break;case "z174":b="1";break;case "DEFAULT_RESETVISIBLE":b=
"1";break;case "z121":b="1";break;case "z119":b="1";break;case "z120":b="white";break;case "z118":b="0";break;case "z141":b="0";break;case "DEFAULT_FULLVIEWEXITEXTERNALBUTTONCOLOR":b="\t#F8F8F8";break;case "z190":b="0";break;case "DEFAULT_INITIALR":b="0";break;case "z184":b="1";break;case "z182":b="500";break;case "z183":b=" ";break;case "z183COLOR":b="#000000";break;case "z127":b="lightgray";break;case "z126":b="white";break;case "z159":b="lightgray";break;case "z158":b="white";break;case "z12":b=
"Rotation requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z16":b="Viewing Zoomify Images stored in the ZIF format requires a newer browser version. Please consider upgrading to the current release of your browser.";break;case "z8":b="\nClick the '?' button for help.";break;case "ERROR_ERROR":b="error";break;case "z268":b="3000";break;case "z268MEDIUM":b="1500";break;case "z268SHORT":b="750";break;case "z287":b="Parameter unrecognized or deprecated - see the Parameters List documentation: ";
break;case "z275":b="Parameter deprecated - please replace: ";break;case "z288":b="Recent versions of most browsers allow dynamic content loading (such as viewing of Zoomify Images) only from a web server.  Please change your browser settings (see READ ME FIRST file for details) or use FireFox or an earlier version of your browser for local viewing.";break;case "z290":b="Browsers allow ZIF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z289":b=
"Browsers allow PFF file viewing only from a web server.  Please use Zoomify Image folders for local viewing.";break;case "z249":b="Image failed to load: possible invalid path, missing image, or network error.";break;case "z280":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website may be missing a file:  ";break;case "ERROR_VALIDATEVIEW":b="Sorry!  Part of this view is not refreshing. The network\nmay be slow, or the website may be missing a file.  ";break;case "z280-ZIF":b=
"Sorry!  Part of this view is not refreshing.  The network may be slow, or the ZIF file may be faulty:  ";break;case "z256-ZIFBYTERANGE":b="Error loading image: ZIF file data request failed. Request content type: ";break;case "z256-ZIFBYTES":b="Error loading image: ZIF file invalid.";break;case "z295":b="Browser does not support XMLHttpRequest.";break;case "z256-IMAGEXML":b="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case "z256-TOOLBARSKINSXML":b=
"Error loading toolbar - skin files not found: please verify that the folders 'Assets/Skins/Default' are in same folder as the web page displaying the Viewer, or add zSkinPath parameter to web page. The zSkinPath parameter may be required if using a content management system such as Drupal, Joomla, or WordPress.";break;case "z256-SLIDESXML":b="Error loading slides: please make sure slide path in web page matches slides folder location on webserver.";break;case "z256":b="Error making network request:\npossible invalid path or network error.";
break;case "z272":b="Error related to network security: ";break;case "z273":b="Error related to network status: ";break;case "z273RANGEREQUESTS":b="Network error. If using ZIF storage, setting MIME type on web server may be necessary. See READ ME FIRST file in ZIF Storage folder or contact Support: ";break;case "z244":b=" converting XML text to XML doc (DOMParser): ";break;case "z243":b=" converting XML doc to XML text (DOMParser): ";break;case "z294":b="Browser does not support XML DOM.";break;case "z293":b=
"XML Doc invalid.";break;case "z296":b="XML invalid.";break;case "z255":b="Image XML invalid.";break;case "z252":b="Image properties XML invalid.";break;case "z250":b="Image properties invalid.";break;case "z251":b="Image properties parameter invalid.";break;case "z254":b="Image tile count does not match value in image XML. If the count is invalid display problems can result.";break;case "z245":b=" while executing callback: ";break;case "z253":b="\nImage tile request not fulfilled within time period expected";
break;case "z271":b="Navigator image failed to load: possible invalid path, missing image, or network error.";break;case "z278":b="Skin XML invalid.";break;case "z279":b="The skin XML file has one or more faulty name lines.";break;case "z283":b="Unknown element style - no known method to identify.";break;case "z284":b="Unknown mouse position - no known method to calculate.";break;case "z285":b="Unknown mouse scroll - no known method to calculate.";break;case "z286":b="Unknown window size - no known method to calculate.";
break;case "z360":b="Launch Zoomify Website";break;case "z363":b="Minimize Toolbar";break;case "z341":b="Expand Toolbar";break;case "z400":b="Zoom Out";break;case "z385":b="Zoom In And Out";break;case "z399":b="Zoom In";break;case "z370":b="Pan Left";break;case "z372":b="Pan Up";break;case "z369":b="Pan Down";break;case "z371":b="Pan Right";break;case "z378":b="Reset Initial View\nAlt-Click: Prior View";break;case "z391":b="Enter Full View";break;case "z391EXIT":b="Exit Full View";break;case "z391EXITEXTERNAL":b=
"Exit Full View";break;case "z342":b="Show Help";break;case "z342OK":b="Close Help Display";break;case "z362":b="Accept And Close Message";break;case "z361":b="Decline And Close Message";break;case "z427DISPLAY":b="www.zoomify.com";break;case "z427":b="http://www.zoomify.com";break;case "z427TARGET":b="_blank";break;case "z439":b="Navigator Bird's Eye View";break;case "z420":b="X";break;case "z422":b="430";break;case "z421":b="300";break;case "z423":b="OK";break;case "z437":b="430";break;case "z436":b=
"84";break;case "z435":b="Cancel";break;case "z438":b="OK";break;case "z32":b="<p align=%22center%22><font face=%22Arial,Helvetica,sans-serif%22><strong>Viewer Help</strong></font></p><p align=%22justify%22><font face=%22Arial,Helvetica,sans-serif%22>To explore this image, simply click the image to zoom, double-click to zoom out, or click-drag to pan.<br><br>The Navigator thumbnail overview can also be clicked or click-dragged to pan.<br><br>Use the Toolbar for exact navigation - if using a mouse, hold it over any button to see a helpful tip.</font></p>";
break;default:b="Unexpected resource request"}return b},clearDisplay:function(a){if(a)if(Z.useCanvas&&"CANVAS"==a.tagName)Z.Utils.clearCanvas(a);else for(;a.hasChildNodes();)a.removeChild(a.lastChild)},clearCanvas:function(a){a=a.getContext("2d");a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore()},deleteDiv:function(a){for(a=document.getElementById(a);a.hasChildNodes();)a.removeChild(a.lastChild);a.parentNode.removeChild(a)},createCallback:function(a,
b){for(var c=[],d=2,e=arguments.length;d<e;d++)c[c.length]=arguments[d];return function(){for(var d=c.concat([]),e=0,m=arguments.length;e<m;e++)d[d.length]=arguments[e];return b.apply(a,d)}},validateCallback:function(a){for(var b=0,c=Z.callbacks.length;b<c;b++){var d=Z.callbacks[b];if(d.callbackEvent==a&&"object"===typeof d&&"function"===typeof d.callbackFunction)switch(a){case "viewZoomingGetCurrentZoom":var e=Z.Viewport.getZoom();Z.Utils.functionCallWithDelay(function(){d.callbackFunction(e)},10);
break;case "viewUpdateCompleteGetLabelIDs":var h=Z.Viewport.getLabelIDsInCurrentView(!1);Z.Utils.functionCallWithDelay(function(){d.callbackFunction(h)},10);break;case "viewUpdateCompleteGetLabelInternalIDs":var f=Z.Viewport.getLabelIDsInCurrentView(!0);Z.Utils.functionCallWithDelay(function(){d.callbackFunction(f)},10);break;case "labelSavedGetJSONObject":var m=Z.Viewport.getCurrentLabel();if(m){var l=m.internalID,s=Z.Viewport.getLabelJSONObject(l,!0);Z.Utils.functionCallWithDelay(function(){d.callbackFunction(s)},
10)}break;case "labelCreatedGetInternalID":Z.Viewport&&!Z.Viewport.getParsingXML()&&(m=Z.Viewport.getCurrentLabel())&&(l=m.internalID,Z.Utils.functionCallWithDelay(function(){d.callbackFunction(l)},10));break;case "labelSelectedInViewportGetIDs":Z.Viewport&&(m=Z.Viewport.getCurrentLabel())&&Z.Utils.functionCallWithDelay(function(){d.callbackFunction(m.id,m.internalID)},10);break;case "currentLabelChangedGetID":Z.Viewport&&(m=Z.Viewport.getCurrentLabel())&&Z.Utils.functionCallWithDelay(function(){d.callbackFunction(m.id,
m.internalID)},10);break;default:Z.Utils.functionCallWithDelay(d.callbackFunction,10)}}},createContainerElement:function(a,b,c,d,e,h,f,m,l,s,w,x,y,G,R,ha,Q){var A=document.createElement(a);this.stringValidate(b)&&(A.id=b);b=A.style;b.display=this.stringValidate(c)?c:"inline-block";b.position=this.stringValidate(d)?d:"static";b.overflow=this.stringValidate(e)?e:"hidden";"canvas"==a?(this.stringValidate(h)&&A.setAttribute("width",h),this.stringValidate(f)&&A.setAttribute("height",f)):(this.stringValidate(h)&&
(b.width=h),this.stringValidate(f)&&(b.height=f));this.stringValidate(m)&&(b.left=m);this.stringValidate(l)&&(b.top=l);b.borderStyle=this.stringValidate(s)?s:"none";b.borderWidth=this.stringValidate(w)?w:"0px";b.borderColor="#696969";b.background=this.stringValidate(x)?x:"transparent none";b.margin=this.stringValidate(y)?y:"0px";b.padding=this.stringValidate(G)?G:"0px";b.whiteSpace=this.stringValidate(R)?R:"normal";this.stringValidate(ha)&&(b.cursor=ha);"undefined"!==Q&&Q&&(Z.Utils.addEventListener(A,
"touchstart",Z.Utils.preventDefault),Z.Utils.addEventListener(A,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(A,"contextmenu",Z.Utils.preventDefault));return A},createCenteredElement:function(a,b){var c=this.createContainerElement("div"),d=[];d[d.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';d[d.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';
d[d.length]='<div id="'+b+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';c.innerHTML=d.join("");for(var d=c=c.firstChild,e=c.getElementsByTagName("div");0<e.length;)d=e[0],e=d.getElementsByTagName("div");d.appendChild(a);return c},createTextElement:function(a,b,c,d,e,h,f,m,l,s,w,x,y,G,R,ha,Q,A){c=Z.Utils.createContainerElement("div","textBoxFor-"+a,"inline-block","absolute","hidden",c,d,e,h,m,l,"white","0px",f,"normal");
d=document.createElement("textarea");c.appendChild(d);e=d.style;d.id=a;d.value=b;d.readOnly=s;e.width="100%";e.height="100%";e.margin="0";e.border="0";this.stringValidate(w)&&(e.fontFamily=w);this.stringValidate(x)&&(e.fontSize=x);this.stringValidate(y)&&(e.resize=y);this.stringValidate(G)&&(d.columns=G);this.stringValidate(R)&&(d.rows=R);this.stringValidate(ha)&&(e.overflowX=ha);this.stringValidate(Q)&&(e.overflowY=Q);this.stringValidate(A)&&(d.wrap=A,"off"==A&&(e.whiteSpace="nowrap"));return c},
createSelectElement:function(a,b,c,d,e,h,f,m,l,s){var w=document.createElement("select");w.id=a;Z.Utils.stringValidate(b)&&"none"!=b&&(w.options[0]=new Option(b,null));a=0;for(b=c.length;a<b;a++)w.options[w.options.length]=new Option(c[a].text,c[a].value);Z.Utils.addEventListener(w,"undefined"!==typeof s&&null!==s?s:"change",l);c=w.style;c.width=d+"px";c.position="absolute";c.left=e+"px";c.top=h+"px";c.fontSize=null==f?"11px":f+"px";c.fontFamily="verdana";c.visibility=m;return w},updateSelectElement:function(a,
b,c){if(a){var d=-1!=a.selectedIndex?a.selectedIndex:0;a.innerHTML="";for(var e=0,h=b.length;e<h;e++)a.options[a.options.length]=new Option(b[e].text,b[e].value.toString());"undefined"!==typeof c&&null!==c&&(b=parseInt(Z.Utils.arrayIndexOfObjectValue(b,"value",c),10),-1!=b&&(d=b));b=a.options.length-1;a.selectedIndex=d<=b?d:b}},getChildElementByID:function(a,b){for(var c=null,d=0,e=a.childNodes.length;d<e&&(c=a.childNodes[d],c.id!=b)&&(c=Z.Utils.getChildElementByID(c,b),null===c);d++);return c},getElementPosition:function(a){for(var b=
0,c=0,d="fixed"==this.getElementStyle(a).position,e=this.getOffsetParent(a,d);e;)b+=a.offsetLeft,c+=a.offsetTop,d&&(a=this.getPageScroll(),b+=a.x,c+=a.y),a=e,d="fixed"==this.getElementStyle(a).position,e=this.getOffsetParent(a,d);return new this.Point(b,c)},getOffsetParent:function(a,b){return b&&a!=document.body?document.body:a.offsetParent},getElementSize:function(a){return new this.Point(a.clientWidth,a.clientHeight)},getElementStyle:function(a){if(a.currentStyle)return a.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(a,
"");this.showMessage(this.getResource("z283"))},getElementStyleProperty:function(a,b){if(window.getComputedStyle)return window.getComputedStyle(a,null).getPropertyValue(b);if(a.currentStyle)return a.currentStyle[b];this.showMessage(this.getResource("z283"))},getEventTargetCoords:function(a){return getElementPosition(Z.Utils.target(a))},getFirstTouch:function(a){var b=null,c=a.touches;a=a.changedTouches;"undefined"!==typeof c?b=c[0]:"undefined"!==typeof a&&(b=a[0]);return b},getMousePosition:function(a){var b=
0,c=0;"DOMMouseScroll"==a.type&&Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion?(b=a.screenX,c=a.screenY):"number"===typeof a.pageX?(b=a.pageX,c=a.pageY):"number"===typeof a.clientX?(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):this.showMessage(this.getResource("z284"));return new this.Point(b,c)},getMouseScroll:function(a){var b=0;"number"===typeof a.wheelDelta?b=a.wheelDelta:"number"===typeof a.detail?
b=-1*a.detail:this.showMessage(this.getResource("z285"));return b?b/Math.abs(b):0},getPageScroll:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};if("number"===typeof window.pageXOffset)a=window.pageXOffset,b=window.pageYOffset;else if(d.scrollLeft||d.scrollTop)a=d.scrollLeft,b=d.scrollTop;else if(c.scrollLeft||c.scrollTop)a=c.scrollLeft,b=c.scrollTop;return new this.Point(a,b)},getScreenSize:function(){return new this.Point(screen.width,screen.height)},getWindowSize:function(){var a=
0,b=0,c=document.documentElement||{},d=document.body||{};"number"===typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):c.clientWidth||c.clientHeight?(a=c.clientWidth,b=c.clientHeight):d.clientWidth||d.clientHeight?(a=d.clientWidth,b=d.clientHeight):this.showMessage(this.getResource("z286"));return new this.Point(a,b)},Button:function(a,b,c,d,e,h,f,m,l,s,w,x,y,G,R,ha,Q,A,X,ga){a=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",f,m,l,s,G,R,ha,Q,A,X,ga);if(Z.Utils.stringValidate(b)){var r=
document.createTextNode(b);a.appendChild(Z.Utils.createCenteredElement(r));Z.Utils.setTextNodeStyle(r,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{c=Z.Utils.stringRemoveTrailingSlashCharacters(c);var H=Z.Utils.createGraphicElement(c+"/"+d),ca=Z.Utils.createGraphicElement(c+"/"+e),M=Z.Utils.createGraphicElement(c+"/"+h);H.style.width=ca.style.width=M.style.width=f;H.style.height=ca.style.height=M.style.height=m;H.style.position=ca.style.position=M.style.position=
"absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&(H.style.top=ca.style.top=M.style.top="");ca.style.visibility=M.style.visibility="hidden";H.alt=ca.alt=M.alt="";"undefined"!==typeof y&&Z.Utils.stringValidate(y)&&(H.alt=Z.Utils.getResource(y));a.appendChild(H);a.appendChild(ca);a.appendChild(M)}Z.Utils.addEventListener(a,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mousedown",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,
"mouseup",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mouseout",Z.Utils.stopPropagation);"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(H,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(ca,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(M,"contextmenu",Z.Utils.preventDefault));Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchend",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchcancel",Z.Utils.preventDefault);
Z.Utils.stringValidate(b)||(Z.Utils.disableTextInteraction(r),Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault));Z.tooltipsVisible&&Z.Utils.stringValidate(y)&&(a.title=Z.Utils.getResource(y));Z.Utils.setButtonHandler(a,w,x);this.elmt=a},buttonSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=c+"px";c=a.firstChild;d=a.childNodes[1];a=a.childNodes[2];c&&d&&a&&(c.style.width=d.style.width=a.style.width=b+"px",c.style.height=d.style.height=a.style.height=b+"px")},setButtonDefaults:function(a){Z.Utils.clearButtonSettings(a);
Z.Utils.setButtonState(a,"up");Z.Utils.setButtonHandler(a,"mouseover",Z.Toolbar.z457)},clearButtonSettings:function(a){var b=a.firstChild,c=a.childNodes[1],d=a.childNodes[2];b&&c&&d&&(b.style.visibility=c.style.visibility=d.style.visibility="hidden",Z.Utils.removeEventListener(b,"mouseover",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mousedown",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mouseout",Z.Toolbar.z457),Z.Utils.removeEventListener(d,"mouseup",Z.Toolbar.z457),Z.Utils.removeEventListener(a,
"touchstart",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchend",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchcancel",Z.Toolbar.z457));Z.Utils.removeEventListener(a,"mouseover",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mousedown",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseout",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseup",Z.Toolbar.z457)},setButtonState:function(a,b){var c="up"==b?a.firstChild:"down"==b?a.childNodes[1]:a.childNodes[2];c&&(c.style.visibility="visible")},
setButtonHandler:function(a,b,c){c="undefined"!==c?c:Z.Toolbar.z457;var d="undefined"!==b?b:"mouseover";if("mouseover"==b&&"undefined"!==typeof a.firstChild)a=a.firstChild;else if("mousedown"!=b||"undefined"===typeof a.childNodes[1])"mouseup"==b&&"undefined"!==typeof a.childNodes[2]?a=a.childNodes[2]:"mouseout"==b&&"undefined"!==typeof a.childNodes[1]&&(a=a.childNodes[1]);Z.Utils.addEventListener(a,"mousedown"==b?"touchstart":"touchend",c);Z.Utils.addEventListener(a,d,c)},Graphic:function(a,b,c,d,
e,h,f,m){b=Z.Utils.stringRemoveTrailingSlashCharacters(b);b=Z.Utils.createGraphicElement(c?b+"/"+c:b);c=b.style;c.width=d;c.height=e;"undefined"!==typeof m&&Z.Utils.stringValidate(m)?b.alt=Z.Utils.getResource(m):b.alt="";c=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",d,e,h,f,"none","0px","transparent none","0px","0px","normal");c.appendChild(b);this.elmt=c;Z.Utils.addEventListener(b,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(b,"touchstart",Z.Utils.preventDefault);
Z.Utils.addEventListener(b,"contextmenu",Z.Utils.preventDefault)},createGraphicElement:function(a){var b=this.createContainerElement("img"),c=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(c=this.createContainerElement("span",null,"inline-block"),b.onload=function(){c.style.width=c.style.width||b.width+"px";c.style.height=c.style.height||b.height+"px";b=b.onload=null},c.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'", sizingMethod="scale")'):(c=b,c.src=a);return c},
graphicSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=c+"px";a=a.firstChild.style;a.width=b+"px";a.height=c+"px"},Point:function(a,b){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0},Point3D:function(a,b,c){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0;this.z="number"===typeof c?c:0},Range:function(a,b){this.start="number"===typeof a?a:0;this.end="number"===typeof b?b:0},stringValidate:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&"null"!==a},
stringReadable:function(a){return a.replace(RegExp("%20","g")," ")},stringLowerCaseFirstLetter:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},stringUpperCaseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},stringMultiply:function(a,b){var c=Math.ceil(Math.log(b)/Math.LN2),d=a;do d+=d;while(0<--c);return d.slice(0,a.length*b)},stringRemoveTrailingSlashCharacters:function(a){return"/"==a.slice(-1,a.length)?a.slice(0,a.length-1):a},stringRemoveTabAndLineWrapCharacters:function(a){a=
a.replace(/\n/g,"");a=a.replace(/\r/g,"");return a=a.replace(/\t/g,"")},stringUnescapeAmpersandCharacters:function(a){a=a.replace(/\n/g,"");a=a.replace(/&#38;/g,"&");a=a.replace(/&#038;/g,"&");return a=a.replace(/&amp;/g,"&")},setTextAreaStyle:function(a,b,c,d,e,h,f,m,l,s,w,x,y){a=a.firstChild.style;a.color=b;a.fontFamily=c;a.fontSize=d;a.fontSizeAdjust=e;a.fontStyle=h;a.fontStretch=f;a.fontVariant=m;a.fontWeight=l;a.lineHeight=s;a.textAlign=w;a.textDecoration=x;a.padding=y},setTextNodeStyle:function(a,
b,c,d,e,h,f,m,l,s,w,x){a=a.parentNode.style;a.color=b;a.fontFamily=c;a.fontSize=d;a.fontSizeAdjust=e;a.fontStyle=h;a.fontStretch=f;a.fontVariant=m;a.fontWeight=l;a.lineHeight=s;a.textAlign=w;a.textDecoration=x},stringValidateColorValue:function(a){Z.Utils.stringValidate(a)||(a="#000000");0!=a.indexOf("#")&&(a="#"+a);return a},xmlConvertTextToDoc:function(a){var b=null;if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(c){this.showMessage(c.name+this.getResource("z244")+
c.message)}else if(window.DOMParser)try{b=(new DOMParser).parseFromString(a,"text/xml")}catch(d){this.showMessage(d.name+this.getResource("z244")+d.message)}else this.showMessage(this.getResource("z294"));return b},xmlConvertDocToText:function(a){var b=null;if(window.ActiveXObject)try{b=a.xml}catch(c){this.showMessage(c.name+this.getResource("z243")+c.message)}else if(window.DOMParser)try{b=(new XMLSerializer).serializeToString(a)}catch(d){this.showMessage(d.name+this.getResource("z243")+d.message)}else this.showMessage(this.getResource("z294"));
return b},jsonConvertObjectToXMLText:function(a){var b=function(a,c){var d="";if(a instanceof Array)for(var m=0,l=a.length;m<l;m++)d+=b(a[m],c)+"\n";else if("object"===typeof a){m=!1;d+="<"+c;for(l in a)"object"!==typeof a[l]?d+=" "+l+'="'+a[l].toString()+'"':m=!0;d+=">";if(m)for(l in a)"#text"==l?d+=a[l]:"object"===typeof a[l]&&(d+=b(a[l],l));d+="</"+c+">"}else d+="<"+c+">"+a.toString()+"</"+c+">";return d},c="",d;for(d in a)c+=b(a[d],d);return c.replace(/\t|\n/g,"")},jsonConvertXMLTextToJSONText:function(a){var b=
{convertToObject:function(a){var d={};if(1==a.nodeType){if(a.attributes.length)for(var e=0,h=a.attributes.length;e<h;e++)d[a.attributes[e].nodeName]=(a.attributes[e].nodeValue||"").toString();if(a.firstChild){for(var e=0,h=!1,f=a.firstChild;f;f=f.nextSibling)1==f.nodeType?h=!0:3==f.nodeType&&f.nodeValue.match(/[^ \f\n\r\t\v]/)&&e++;if(h)if(2>e)for(b.reduceWhitespace(a),f=a.firstChild;f;f=f.nextSibling)3==f.nodeType?d["#text"]=b.escapeMinimal(f.nodeValue):d[f.nodeName]?d[f.nodeName]instanceof Array?
d[f.nodeName][d[f.nodeName].length]=b.convertToObject(f):d[f.nodeName]=[d[f.nodeName],b.convertToObject(f)]:d[f.nodeName]=b.convertToObject(f);else a.attributes.length?d["#text"]=b.escapeMinimal(b.innerXML(a)):d=b.escapeMinimal(b.innerXML(a));else e&&(a.attributes.length?d["#text"]=b.escapeMinimal(b.innerXML(a)):d=b.escapeMinimal(b.innerXML(a)))}a.attributes.length||a.firstChild||(d=null)}else 9==a.nodeType?d=b.convertToObject(a.documentElement):alert("This node type not supported : "+a.nodeType);
return d},convertToJSONText:function(a,d){var e=d?'"'+d+'"':"";if(a instanceof Array){for(var h=0,f=a.length;h<f;h++)a[h]=b.convertToJSONText(a[h],"","\t");e+=(d?":[":"[")+(1<a.length?"\n\t"+a.join(",\n\t")+"\n":a.join(""))+"]"}else if(null==a)e+=(d&&":")+"null";else if("object"===typeof a){h=[];for(f in a)h[h.length]=b.convertToJSONText(a[f],f,"\t");e+=(d?":{":"{")+(1<h.length?"\n\t"+h.join(",\n\t")+"\n":h.join(""))+"}"}else e="string"==typeof a?e+((d&&":")+'"'+a.toString()+'"'):e+((d&&":")+a.toString());
return e},reduceWhitespace:function(a){a.normalize();for(var d=a.firstChild;d;)if(3==d.nodeType)if(d.nodeValue.match(/[^ \f\n\r\t\v]/))d=d.nextSibling;else{var e=d.nextSibling;a.removeChild(d);d=e}else 1==d.nodeType&&b.reduceWhitespace(d),d=d.nextSibling;return a},escapeMinimal:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},innerXML:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else{var e=function(a){var b="";if(1==a.nodeType){for(var b=
b+("<"+a.nodeName),c=0,d=a.attributes.length;c<d;c++)b+=" "+a.attributes[c].nodeName+"='"+(a.attributes[c].nodeValue||"").toString()+"'";if(a.firstChild){b+=">";for(c=a.firstChild;c;c=c.nextSibling)b+=e(c);b+="</"+a.nodeName+">"}else b+="/>"}else 3==a.nodeType&&(b+=a.nodeValue);return b};for(a=a.firstChild;a;a=a.nextSibling)b+=e(a)}return b}};9==a.nodeType&&(xml=xml.documentElement);return jsonTextOut="{\n  "+b.convertToJSONText(b.convertToObject(b.reduceWhitespace(a)),a.nodeName,"\t").replace(/\t/g,
"  ")+"\n}"},arrayClear:function(a){if(a)for(;0<a.length;)a.pop()},arrayIndexOf:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var d=a.length;c<d;c++)if(a[c]===b)return c;return-1},arrayIndexOfObjectValue:function(a,b,c,d){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var e=a.length;d<e;d++)if(a[d][b]===c)return d}return-1},arrayIndexOfObjectTwoValues:function(a,b,c,d,e,h){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var f=a.length;d<f;d++)if(a[d][b]===
c&&a[d][e].toString()===h.toString())return d}return-1},arrayIndexOfSubstring:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var d=a.length;c<d;c++)if(-1!=a[c].indexOf(b))return c;return-1},arrayIndexOfObjectValueSubstring:function(a,b,c,d,e){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var h=a.length;d<h;d++)if(e){if(-1!=a[d][b].toLowerCase().indexOf(c))return d}else if(-1!=a[d][b].indexOf(c))return d;return-1},arrayIntersect:function(a,b){for(var c,d,e,h=[],f=0,m=a.length;f<m;f++){c=a[f];
e=!1;for(var l=0,s=b.length;l<s&&c>=(d=b[l]);l++)if(d==c){e=!0;break}e&&(h[h.length]=a[f])}return h},arrayMap:function(a,b){var c=[];if(Z.arrayMapSupported)c=a.map(b);else for(var d=0,e=a.length;d<e;d++)c[d]=b(a[d]);return c},arraySplice:function(a,b,c){if(Z.arraySpliceSupported)if(3<arguments.length)for(var d=3,e=arguments.length;d<e;d++)a.splice(b,c,arguments[d]);else a.splice(b,c);else{0>c&&(c=0);var h=[];if(3<arguments.length)for(d=3,e=arguments.length;d<e;d++)h[h.length]=arguments[d];for(var d=
Z.Utils.arraySubarray(a,0,b),f=Z.Utils.arraySubarrayLen(a,b,c),e=Z.Utils.arraySubarray(a,b+c),h=d.concat(h,e),d=a.length=0,e=h.length;d<e;d++)a[a.length]=h[d];a=f}return a},arraySubarraySimple:function(a,b){return this.slice(a,b)},arraySortNumericAscending:function(a,b,c){a.sort(function(a,b){return a-b});return a},arraySortNumericDescending:function(a,b,c){a.sort(function(a,b){return b-a});return a},arraySortByObjectValue:function(a,b,c,d){a.sort(function(a,c){return a[b]>c[b]});return a},arraySubarray:function(a,
b,c){0>b&&(b=0);if(!c||c>a.length)c=a.length;if(b==c)return[];for(var d=[];b<c;b++)d[d.length]=a[b];return d},arraySubarrayLen:function(a,b,c){if(b>=a.length||c&&0>=c)return[];0>b&&(b=Math.abs(b)>a.length?0:a.length+b);if(!c||c+b>a.length)c=a.length-b;for(var d=[],e=b;e<b+c;e++)d[d.length]=a[e];return d},arraySubtract:function(a,b){for(var c=a.slice(0),d=0,e=c.length;d<e;d++){for(var h=c[d],f=!1,m=0,l=b.length;m<l&&h>=(elmt2=b[m]);m++)if(elmt2==h){f=!0;break}f&&(c=Z.Utils.arraySplice(c,d--,1))}return c},
arrayToArrayOfStrings:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]="undefined"!==typeof a[c]&&"undefined"!=a[c]&&null!==a[c]?a[c].toString():"";return b},arrayUnique:function(a){for(var b=1;b<a.length;)a[b-1]==a[b]?a=Z.Utils.arraySplice(a,b,1):b++;return a},arrayUniqueByObjectValue:function(a,b){if("undefined"!==typeof a)for(var c=1;c<a.length;)a[c-1][b]==a[c][b]?a=Z.Utils.arraySplice(a,c,1):c++;return a},calculatePointsDistance:function(a,b,c,d){return Math.sqrt((a-=c)*a+(b-=d)*b)},fullScreenView:function(a,
b,c){if("undefined"===typeof c||null===c)c=!1;b?(b=document.documentElement,b.requestFullScreen?(a.requestFullScreen(),Z.Utils.addEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.mozRequestFullScreen?(a.mozRequestFullScreen(),Z.Utils.addEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):b.webkitRequestFullScreen?(a.webkitRequestFullScreen(),Z.Utils.addEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):
b.msRequestFullscreen&&(a.msRequestFullscreen(),Z.Utils.addEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler))):document.cancelFullScreen?(c||document.cancelFullScreen(),Z.Utils.removeEventListener(document,"fullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.msExitFullscreen?(c||document.msExitFullscreen(),Z.Utils.removeEventListener(document,"MSFullscreenChange",Z.Viewport.fullScreenEscapeHandler)):document.mozCancelFullScreen?(c||document.mozCancelFullScreen(),
Z.Utils.removeEventListener(document,"mozfullscreenchange",Z.Viewport.fullScreenEscapeHandler)):document.webkitCancelFullScreen&&(c||document.webkitCancelFullScreen(),Z.Utils.removeEventListener(document,"webkitfullscreenchange",Z.Viewport.fullScreenEscapeHandler))},rotatePoint:function(a,b,c){var d=Math.PI/180*-c;c=a*Math.cos(d)-b*Math.sin(d);a=a*Math.sin(d)+b*Math.cos(d);return new Z.Utils.Point(c,a)},rotateElement:function(a,b,c){if(b!=Z.imageR||c)b="rotate("+b.toString()+"deg)",a.transform=b,
a.msTransform=b,a.mozTransform=b,a.webkitTransform=b,a.oTransform=b},getDisplayPositionRotated:function(a,b){if("undefined"===typeof b||null===b)b=Z.imageR;0>b&&(b+=360);var c=parseFloat(a.width)/2,d=parseFloat(a.height)/2,e=Z.Utils.rotatePoint,h=new Z.Utils.Point(0,0);0!=b&&(90==b?h=e(-c,d,-b):180==b?h=e(c,d,-b):270==b&&(h=e(c,-d,-b)),h.x+=c,h.y+=d);return new Z.Utils.Point(h.x,h.y)},translateElement:function(a,b,c){b="translate("+b.toString()+"px,"+c.toString()+"px)";a.transform=b;a.msTransform=
b;a.mozTransform=b;a.webkitTransform=b;a.oTransform=b},intValue:function(a,b){return(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3]},longValue:function(a,b){var c=(a[b]+(a[b+1]<<8)|a[b+2]<<16)+16777216*a[b+3];0!=a[b+4]&&(c+=4294967296*a[b+4]);return c},shortValue:function(a,b){return a[b]+(a[b+1]<<8)},createUint8Array:function(a,b){return Z.uInt8ArraySupported?new Uint8Array(a,b):new Z.Utils.TypedArray(a,b)},TypedArray:function(a){var b;if("number"===typeof a){b=Array(a);for(var c=0;c<a;++c)b[c]=0}else b=
a.slice(0);b.subarray=Z.Utils.arraySubarraySimple;b.buffer=b;b.byteLength=b.length;b.set=Z.Utils.setSimple;"object"===typeof a&&a.buffer&&(b.buffer=a.buffer);return b},setSimple:function(a,b){2>arguments.length&&(b=0);for(var c=0,d=a.length;c<d;++c,++b)this[b]=a[c]&255},encodeBase64:function(a){var b,c,d,e,h=0,f=0,m="",m=[];if(!a)return a;do b=a[h++],c=a[h++],d=a[h++],e=b<<16|c<<8|d,b=e>>18&63,c=e>>12&63,d=e>>6&63,e&=63,m[f++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e);while(h<a.length);m=m.join("");a=a.length%3;return(a?m.slice(0,a-3):m)+"===".slice(a||3)},validateResponseArrayFunctionality:function(){"ZoomifyImageFile"!=Z.tileSource||Z.responseArraySupported||Z.responseArrayPrototyped||(Z.Utils.defineObjectProperty(XMLHttpRequest.prototype,
"response",{get:function(){return(new VBArray(this.responseBody)).toArray()}}),Z.responseArrayPrototyped=!0)},defineObjectProperty:function(a,b,c){Z.definePropertySupported?Object.defineProperty(a,b,c):(delete a[b],"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),"value"in c&&(a.__defineSetter__(b,function(a){this.__defineGetter__(b,function(){return a});return a}),a[b]=c.value))},createImageElementFromBytes:function(a,b){function c(a){d.onload=null;d.onabort=null;d.onerror=
null;e&&window.clearTimeout(e);window.setTimeout(function(){b(d)},1)}var d=new Image,e=null,h=parseFloat(this.getResource("z139")),f=function(){c(!1)};d.onload=function(){c(!0)};d.onabort=f;d.onerror=f;e=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));c(!1)},h);d.src=a},getCurrentUTCDateAsString:function(){var a=new Date,b=(10>a.getUTCMonth()+1?"0":"")+(a.getUTCMonth()+1),c=(10>a.getUTCDate()?"0":"")+a.getUTCDate(),d=(10>a.getUTCHours()?"0":"")+a.getUTCHours(),e=(10>a.getUTCMinutes()?
"0":"")+a.getUTCMinutes(),h=(10>a.getUTCSeconds()?"0":"")+a.getUTCSeconds();return a.getUTCFullYear()+b+c+d+e+h},cacheProofPath:function(a){a+="?t"+(new Date).getTime().toString()+"n"+Z.cacheProofCounter.toString();Z.cacheProofCounter+=1;return a},easing:function(a,b,c,d){b-=a;return 1>(c/=d/2)?b/2*c*c*c*c*c+a:b/2*((c-=2)*c*c*c*c+2)+a},functionCallWithDelay:function(a,b){window.setTimeout(a,b)},nodeIsInViewer:function(a){for(var b=!1;0==b;)if(a)a.id?"ViewerDisplay"==a.id?b=!0:a=a.parentNode:a=a.parentNode;
else break;return b},roundToFixed:function(a,b){var c=Math.round(a).toString().length,c=b-c,c=Math.pow(10,0>c?0:c);return a=Math.round(a*c)/c},getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},getSign:function(a){return a?0>a?-1:1:0},configureHelpDisplay:function(){var a=80,b=80,c=parseInt(this.getResource("z422"),10),d=parseInt(this.getResource("z421"),10);c>=Z.viewerW&&(c=Z.viewerW-a,a-=40);d>=Z.viewerH&&(d=Z.viewerH-b,b-=40);var a=Z.viewerW-c-a,e=Z.viewerH-d-b,h=this.getResource("z127"),
b=this.getResource("z126");Z.HelpDisplay=this.createContainerElement("div","HelpDisplay","inline-block","absolute","hidden",c+"px",d+"px",a+"px",e+"px","solid","1px",h,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.HelpDisplay);a=Z.Utils.createContainerElement("div","helpTextBox","inline-block","absolute",null,c-50+"px",d-74+"px","4px","4px","solid","1px","white","0px","20px",null);a.style.overflowY="auto";Z.HelpDisplay.appendChild(a);Z.help=document.getElementById("helpTextBox");a=parseInt(Z.Utils.getResource("z230"),
10);Z.HelpDisplay.style.zIndex=(a+9).toString();d=d-18-5;c-=66;a=this.getResource("z423");c=new Z.Utils.Button("buttonHelpOk",a,null,null,null,null,"56px","18px",c+"px",d+"px","mousedown",this.helpOkButtonHandler,"z342OK","solid","1px",b,"0px","0px");Z.HelpDisplay.appendChild(c.elmt)},helpOkButtonHandler:function(a){Z.Utils.hideHelp();return!0},showHelp:function(a){Z.HelpDisplay||Z.Utils.configureHelpDisplay();Z.help&&(Z.help.innerHTML=unescape(a),Z.HelpDisplay.style.display="inline-block",document.getElementById("buttonHelpOk").style.display=
"inline-block")},hideHelp:function(){Z.HelpDisplay.style.display="none"},configureMessageDisplay:function(){var a=parseInt(this.getResource("z437"),10),b=parseInt(this.getResource("z436"),10),c=Z.viewerH-b-40,d=this.getResource("z159"),e=this.getResource("z158");Z.MessageDisplay=this.createContainerElement("div","MessageDisplay","inline-block","absolute","hidden",a+"px",b+"px","40px",c+"px","solid","1px",d,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.MessageDisplay);c=parseInt(Z.Utils.getResource("z230"),
10);Z.MessageDisplay.style.zIndex=(c+10).toString();c=Z.Utils.createTextElement("messageBox","",a-18+"px",b-40+"px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.MessageDisplay.appendChild(c);Z.messages=document.getElementById("messageBox");b=b-18-5;a-=66;c=this.getResource("z438");e=new Z.Utils.Button("buttonMessageOk",c,null,null,null,null,"56px","18px",a+"px",b+"px","mousedown",this.messageOkButtonHandler,"z362","solid","1px",e,"0px","0px");Z.MessageDisplay.appendChild(e.elmt)},
messageOkButtonHandler:function(a){Z.Utils.hideMessage();Z.Viewport&&Z.coordinatesVisible&&Z.Viewport.setCoordinatesDisplayVisibility(!1);return!0},messageCancelButtonHandler:function(a){Z.Utils.hideMessage();return!1},showMessage:function(a,b,c,d,e){Z.MessageDisplay||Z.Utils.configureMessageDisplay();Z.MessageDisplay.messageTimer&&window.clearTimeout(MessageDisplay.messageTimer);var h=!0;e&&(-1!=Z.Utils.arrayIndexOf(Z.messageDisplayList,a)?h=!1:Z.messageDisplayList[Z.messageDisplayList.length]=a);
if(h&&(Z.messages&&(Z.messages.value=a),Z.MessageDisplay.style.display="inline-block","undefined"!==typeof d&&null!==d&&(a=document.getElementById("textBoxFor-messageBox"))&&(a.firstChild.style.textAlign=d),d=document.getElementById("buttonMessageOk"),a=parseInt(this.getResource("z436"),10),"undefined"!==typeof b&&null!==b&&b?(d.style.display="inline-block",Z.MessageDisplay.style.height=a+"px"):(d.style.display="none",Z.MessageDisplay.style.height=a-22+"px"),"undefined"!==typeof c&&null!==c&&!isNaN(c))){"undefined"!==
typeof Z.MessageDisplay.messageTimer&&null!==Z.MessageDisplay.messageTimer&&window.clearTimeout(Z.MessageDisplay.messageTimer);if("undefined"===typeof c||null===c)c=3E3;Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,c)}},getMessage:function(){var a="";Z.messages&&Z.Utils.stringValidate(Z.messages.value)&&(a=Z.messages.value);return a},hideMessage:function(){Z.MessageDisplay&&(Z.MessageDisplay.style.display="none")},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&
(window.clearTimeout(Z.MessageDisplay.messageTimer),Z.MessageDisplay.messageTimer=null);Z.Utils.hideMessage()}};